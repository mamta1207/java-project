AdsClass=BaseClass.extend({init:function(){this.submitTimer=null;this.initSettings();this.initDom();this.initPageLoader();this.initQ();this.initLocation();this.init404();this.initOrder();this.initPrevNext();this.initItems();this.initSkyscraper();this.initScreening();this.initBannersScreening();this.initFooterCategories();this.initGoToTop();this.initFavoritesGalleryBox();this.initAdsense(false);this.initCategories();this.initScreenSize();this.initPopState();this.initFacets(this.dom.form);this.initPager();this.initTabs();this.initViewButtons();this.initCurrencyButtons();this.initTopLinks();this.initSubmit();this.initClearParams();this.initSearchOptions();this.initFilters();this.initSeoLocationsFooter();this.setSearchParams();this.showClearButtonIfNeeded()},initSettings:function(){this.settings={shortFields:false,showFloatParamLabel:false};this.settings.shortFields=true;if(window.sitecode=='olxin')this.initGeoAutoSuggest()},initDom:function(){var dom={form:$('#mainTopSearch'),adsContainer:$('#listContainer'),headerContainer:$('#header-container'),bodyContainer:$('#body-container'),params:$('#paramsList'),body:$('body'),categoryHidden:$('#searchFormCatID'),categoryList:$('ul#categorySelectList'),clearParams:$('#clear-params'),searchList:$('#searchList')};dom.qInput=$('#search-text',dom.form);dom.regionInput=$('#cityField',dom.form);dom.distanceSelect=$('#distanceSelect',dom.form);this.dom=dom},initFooterCategories:function(){var $categoriesHeader=$('#categoryLinksHeader'),$categoriesDivs=$('div',$('#categoryLinksSections')).hide();$('li',$categoriesHeader).click(function(){var $this=$(this);$('li.active',$categoriesHeader).removeClass('active fbold');$this.addClass('active');$categoriesDivs.filter('.active').removeClass('active').hide();$('#'+$this.attr('id')+'Section').addClass('active').show()})},init404:function(){if(window.location.href.indexOf('#from404')>0)$('#topmessages').append($('#ad-not-available-box').show())},initPager:function(){var thiz=this;if($.inArray(sitecode,['olxin','olxpk','olxbd'])==-1){var $pageParam=$('#pageParam');if($pageParam.length>0){$pageParam.val($pageParam.data("currentPage"));var $hidden=$('#pageHidden',thiz.dom.form);if(!$hidden.length)$hidden=$('<input type="hidden" id="pageHidden" name="page" />').appendTo(thiz.dom.form).val($pageParam.val())};thiz.dom.body.on('keydown','#pageParam',function(e){var code=e.keyCode||e.which,accepted_special_keys=[13,46,37,39,8],special_key_pressed=false;for(var i=0;i<accepted_special_keys.length;i++)if(accepted_special_keys[i]==code)special_key_pressed=true;if((special_key_pressed||e.ctrlKey||(/\d/.test(String.fromCharCode((96<=code&&code<=105)?code-48:code))&&!e.shiftKey))){if($('#pageParam').val()==''&&code=='48')return false;return true};return false})};if(window.is_archive!=1)$('div.pager a').click(function(){var $this=$(this),page=$this.hasClass('pageNextPrev')?parseInt($this.data("page")):parseInt($('span',$this).text());if(!page||isNaN(page))page=parseInt($this.parent().prev().find('a span').text());var $hidden=$('#pageHidden',thiz.dom.form);if(!$hidden.length)$hidden=$('<input type="hidden" id="pageHidden" name="page" />').appendTo(thiz.dom.form);$hidden.val(page);$('html, body').scrollTop(0);thiz.submitForm(100,true);return false});$('#showAllLocations').click(function(){$(this).next('.all-locations').removeClass('hidden');$(this).remove()})},initPrevNext:function(){var thiz=this;if(window.searchID!=undefined&&window.searchID!='')$('a.linkWithHash',thiz.dom.adsContainer).each(function(){var $this=$(this),hash='#'+window.searchID;if($this.hasClass('linkWithHashPromoted'))hash+=';promoted';if($.browser.webkit&&!$this.hasClass('thumb'))$this.addClass('refreshWebkit');$this.attr('href',$this.attr('href')+hash)});if(window.location.hash.substring(1).indexOf('ad_id=')>=0){var ad_id=window.location.hash.substring(1).replace('ad_id=','');if(/^\w+$/.test(ad_id)){var $ad=$('.ad_id'+ad_id+':first');if($ad.length>0)$('html, body').animate({scrollTop:$ad.offset().top},100)}}},initItems:function(){if($.inArray(sitecode,['olxin','olxpk','olxbd'])==-1)return;var thiz=this;$(thiz.dom.adsContainer).find('h3 > .link').click(function(e){e.stopPropagation()});$(thiz.dom.adsContainer).find('td.offer').find('div.checkbox-container').click(function(e){e.stopPropagation()});$(thiz.dom.adsContainer).find('td.offer').click(function(){var $this=$(this);window.location=$this.find('h3 > .link').attr('href')})},initOrder:function(){var thiz=this;$select=$('#order-select-gallery');$select.change(function(){var $this=$(this),$hidden=$('input[name="search[order]"]',thiz.dom.form);if(!$hidden.length)$hidden=$('<input type="hidden" name="search[order]" />').appendTo(thiz.dom.form);var $optionSelected=$this.find('option:selected');if($optionSelected.length){$hidden.val($optionSelected.data('type'))}else $hidden.remove();thiz.submitForm();return true});if(typeof $.fn.renderForms=='function')$select.parent().renderForms()},initSkyscraper:function(){var thiz=this,$skycraper=$('#skycraper'),$skycraperLeft=$('#skycraperleft'),$skycraperMax=$('#skycraperMax');if($skycraper.length){var topSkycraper=$skycraper.offset().top;$(window).load(function(){topSkycraper=$skycraper.offset().top});if($.browser.webkit)$skycraper.add($skycraperLeft).css('minHeight','1px');function skycraperPosition(event){$document=$(document);var ySkycraper=thiz.isTouchDevice()?Math.abs($('html').position().top):Math.abs($document.scrollTop()),xSkycraper=thiz.isTouchDevice()?Math.abs($('html').position().left):Math.abs($document.scrollLeft());if(ySkycraper>=topSkycraper){var positionContent=$('#body-container .content').offset(),widthContent=$('#body-container .wrapper').outerWidth(),skyescraperLeftWidth=$skycraperLeft.outerWidth();if($skycraperMax.length>0)var maxPosition=$skycraperMax.offset().top-$skycraper.height();if(typeof maxPosition!=='undefined'&&ySkycraper>maxPosition){$skycraper.add($skycraperLeft).removeClass('fix').addClass('abs').css({left:0,top:(maxPosition-topSkycraper>0)?maxPosition-topSkycraper:0}).parent().addClass('abs')}else{$skycraper.removeClass('abs').addClass('fix').css({left:positionContent.left+widthContent+10-xSkycraper,top:0}).parent().removeClass('abs');$skycraperLeft.removeClass('abs').addClass('fix').css({left:positionContent.left-170,top:0}).parent().removeClass('abs')}}else $skycraper.add($skycraperLeft).removeClass('fix').css('left','auto').parent().addClass('abs')};skyCheck=setTimeout(function(){if($skycraper.is(':visible')&&!$('body').hasClass('.bgadriver')){function countWidth(){var windowWidth=$(window).width();if(windowWidth<1130){$('body').css('margin-left',-148).addClass('bodyIndent');$('#innerLayout').css('max-width',970);$('#innerLayout').css('margin','0 auto');$('#innerLayout').css('background','white')}else{$('body').css('margin-left','').removeClass('bodyIndent');$('#innerLayout').css('min-width','auto');$('#innerLayout').css('max-width',970);$('#innerLayout').css('margin','0 auto');$('#innerLayout').css('background','white')}};countWidth();$(window).resize(function(){countWidth()})}},2e3);$(window).scrolled(100,function(){!$skycraper.hasClass('stickyDisabled')&&skycraperPosition()});$(window).resize(function(){!$skycraper.hasClass('stickyDisabled')&&skycraperPosition()})}},initScreening:function(){var $banner=$('.fullscreen-banner');if($banner.length){var $document=$(document),topBanner=$banner.offset().top;function fixBanner(){var yScroll=Math.abs($document.scrollTop());if(yScroll>=topBanner){$banner.addClass('fix').css('top',0)}else $banner.removeClass('fix').css('top','')};fixBanner();$(window).scroll(function(){fixBanner()});$(window).resize(function(){fixBanner()})}},initBannersScreening:function(){var $leftBanner=$('.screening-left-banner'),$rightBanner=$('.screening-right-banner');if($leftBanner.length){var $document=$(document),topBanners=$leftBanner.offset().top;function fixBanners(){var yScroll=Math.abs($document.scrollTop());if(yScroll>=topBanners){var positionContent=$('#body-container .content').offset(),widthContent=$('#body-container .wrapper').outerWidth();$leftBanner.addClass('fix').css({left:positionContent.left-$leftBanner.width()});$rightBanner.addClass('fix').css({left:positionContent.left+widthContent})}else{$leftBanner.removeClass('fix').css('left','');$rightBanner.removeClass('fix').css('left','')}};fixBanners();$(window).scroll(function(){fixBanners()});$(window).resize(function(){fixBanners()})}},resetLocality:function(){$('#filterRegions').val('');$('.autosuggest-geo-district-input').val('');$('#filterRegionsAutosuggest').addClass('hidden');$('#localityFilter').find('span.header.block').text('Locality');$('#localityFilter').find('.icon').removeClass('clear mini').addClass('down')},initLocation:function(){var thiz=this,cityIDOld=window.city_id,regionIDOld=window.region_id;thiz.dom.regionInput.geosuggest({saveAsDefaultLocationInCookie:true,saveAsLastLocationInCookie:true,loadLastLocationsFromCookie:true,loadDefaultLocationFromCookie:(window.city_id==undefined||window.city_id=='')&&(window.region_id==undefined||window.region_id=='')?true:false,distanceSelect:thiz.dom.distanceSelect,citiesOld:window.module_cities_old===1,locationChanged:function(text,regionID,cityID,districtID,distance,byUser){thiz.resetLocality();thiz.cityRegionChanged=regionID!=regionIDOld||cityID!=cityIDOld;if(cityIDOld==''&&cityID==''&&regionIDOld==''&&regionID=='')return;cityIDOld=cityID;regionIDOld=regionID;if(cityID!=''&&(category_id=='3'||root_category_id=='3')){$('#param_locality').removeClass('hidden')}else $('#param_locality').addClass('hidden');byUser&&thiz.submitForm(10);if(districts){var $district=$('#param_district');if(cityID&&districts[cityID]){$district.removeClass('hidden').find('.suggestinput').removeClass('binded')}else{$district.find('a.button').removeClass('fbold').find('span.header').text('District');$district.addClass('hidden').find('.suggestinput').removeClass('binded')}}}});thiz.dom.regionInput.blur(function(){if(thiz.dom.regionInput.val()==thiz.dom.regionInput.attr('defaultalternative'))thiz.dom.regionInput.val(thiz.dom.regionInput.attr('defaultval'))});if(districts){var $district=$('#param_district');if(city_id&&districts[city_id]){$district.removeClass('hidden')}else $district.addClass('hidden')}},initQ:function(){var thiz=this,lastQWithEnter='',lastQ='',clearing=false;thiz.dom.qInput.keydown(function(e){var key=e.charCode?e.charCode:e.keyCode?e.keyCode:0;thiz.dom.qInput.addClass('fbold');if(key==13){lastQ=lastQWithEnter=thiz.dom.qInput.val();thiz.submitForm(10)}else if(key==8)clearing=true}).blur(function(){if(thiz.dom.qInput.val()!=thiz.dom.qInput.attr('defaultval')||clearing)if((lastQWithEnter==''||thiz.dom.qInput.val()!=lastQWithEnter)&&(lastQ==''||thiz.dom.qInput.val()!=lastQ)){lastQWithEnter='';lastQ=thiz.dom.qInput.val();thiz.submitForm(300)};clearing=false});$('a#clearQ',thiz.dom.form).click(function(){thiz.submitForm()})},initCategories:function(){var thiz=this,$categoryInput=$('#choosecat'),$categoryList=thiz.dom.categoryList;$categoryInput.click(function(event){if(!$categoryInput.hasClass('binded')){$categoryInput.addClass('binded');var html='<li>';html+='<a href="" class="rel block tdnone categorySelectA1" data-name="All categories" data-id="0">All categories';html+='<span class="icon caticongray abs">&nbsp;</span></a>';html+='</a>';html+='</li>';var category_id=thiz.dom.categoryHidden.val(),currentCategory=category_id,rootCategory='';for(var z in searchCategories){var category=searchCategories[z];html+='<li>';html+='<a id="a-category-'+category.id+'" href="" class="rel block tdnone categorySelectA1 a-category-'+category.id+'" data-icon_class="a-category-'+category.id+'" data-name="'+category.name+'" data-id="'+category.id+'">';html+=category.name;if(category.children.length)html+='<span class="icon deco abs">&nbsp;</span>';html+='<span class="icon caticongray abs">&nbsp;</span>';html+='<span data-id="'+category.id+'" class="counter counterCategory small abs hidden">0</span>';html+='</a>';if(category.children.length){html+='<ul class="abs">';html+='<li>';html+='<a id="a-category-'+category.id+'" href="" class="rel block tdnone categorySelectA2 a-category-'+category.id+'" data-icon_class="a-category-'+category.id+'" data-name="All in '+category.name+'" data-id="'+category.id+'">';html+='All in '+category.name;html+='</a>';html+='</li>';for(var x in category.children){var child=category.children[x];if(child.id==category_id)rootCategory=category.id;html+='<li>';html+='<a id="a-category-'+child.id+'" href="" class="rel block tdnone categorySelectA2" data-icon_class="a-category-'+category.id+'" data-name="'+child.name+'" data-id="'+child.id+'">';html+=child.name;html+='<span data-id="'+child.id+'" class="counter counterCategory small abs hidden">0</span>';html+='</a>';html+='</li>'};html+='</ul>'};html+='</li>'};$(html).appendTo($categoryList);if(category_id&&!rootCategory){rootCategory=root_category_id;category_id=second_category_id};category_id&&$('#a-category-'+category_id).parent().addClass('selected');rootCategory&&$('#a-category-'+rootCategory).parent().addClass('selected');$('a.categorySelectA1, a.categorySelectA2',$categoryList).click(function(){var $this=$(this),$catHidden=$('#searchFormCatID');if($catHidden.val()==$this.data('id')){$categoryList.hide();return false};$catHidden.val($this.data('id'));$('#main-category-choose-label').addClass('fbold').text($this.data('name')).closest('a');if(parseInt($this.data('id'))==0){$('#main-category-choose-label').removeClass('fbold');$categoryInput.removeClass('fbold');$this.closest('ul#categorySelectList').find('li').removeClass('selected')};$categoryList.hide();$categoryInput.removeClass(function(index,css){return(css.match(/\ba-category-\S+/g)||[]).join(' ')}).addClass($this.data('icon_class'));var $thirdCategory=$('li.subcategory a.category',thiz.dom.params);$thirdCategory.each(function(){var $header=$('span.header',$(this));if($header.length)$header.text($header.data('defaultLabel'))}).removeClass('fbold').closest('div.filter-item').find('.subSelect').removeClass('hidden');$('input[name="search[offer_seek]"]',thiz.dom.form).remove();var copyParameters=!currentCategory;thiz.categoryChanged($this.data('id'),false,copyParameters);thiz.clearFilters(false);thiz.submitForm(20);return false});thiz.initFacets($categoryList);Main.initScaleDropDown($categoryList)};if(!thiz.fakeClick){$categoryList.toggle();event.preventDefault()}});$(document).bind('click',function(e){var $clicked=$(e.target);if(!$clicked.parents().hasClass('combospace'))$categoryList.hide()});$('#distanceSelect').find('a').click(function(){$categoryList.hide()})},initScreenSize:function(){function mediaQuery(){var windowWidth=$(window).width();if(windowWidth<='1510'){$('body').addClass('smallscreen')}else $('body').removeClass('smallscreen')};mediaQuery();$(window).resize(function(){mediaQuery()})},initPageLoader:function(){this.Pageloader=$('<div class="pageloader" id="loader"><div></div></div>').hide().appendTo(this.dom.form)},showPageLoader:function(percentage,time,callback){var thiz=this;callback=callback==undefined?function(){}:callback;this.Pageloader.show().find('div').animate({width:percentage+'%'},time,callback);var $listContainer=thiz.dom.adsContainer,$headerContainer=thiz.dom.headerContainer;if($listContainer.length>0){var ListLoaderPositionTop=$listContainer[0].getBoundingClientRect().top,HeaderContainerHeight=$headerContainer.height();this.ListOverlay=$('<div class="listOverlay"><div><div class="loader"></div>Loading...</div></div>');this.ListOverlay.find('> div').css({top:(ListLoaderPositionTop<=HeaderContainerHeight?HeaderContainerHeight:ListLoaderPositionTop)+70});this.ListOverlay.appendTo($listContainer)}},hidePageLoader:function(percentage){var thiz=this;this.Pageloader.fadeOut(400,function(){thiz.Pageloader.find('div').css('width','0px')});this.ListOverlay.remove()},stopPageLoader:function(percentage){this.Pageloader.find('div').stop();this.ListOverlay.remove()},submitForm:function(timeout,withPage){var thiz=this;if(!withPage||$('#pageHidden').val()=='1')$('#pageHidden').remove();googletag.pubads().refresh();if(this.submitTimer!=null)window.clearTimeout(this.submitTimer);if(timeout==0){thiz.dom.form.submit();thiz.showClearButtonIfNeeded()}else if(timeout==23){thiz.dom.form.submit();thiz.showClearButton()}else{if(this.submitTimer)window.clearTimeout(this.submitTimer);this.submitTimer=window.setTimeout(function(){thiz.dom.form.submit();thiz.showClearButtonIfNeeded()},timeout==undefined?100:parseInt(timeout))}},toggleSearchButtonFilters:function(){var thiz=this;if($('ul.grid-4 li:visible',thiz.dom.params).size()<=0){this.moveSearchButtonToFilters()}else this.moveSearchButtonBelowFilters()},moveSearchButtonToFilters:function(){this.dom.searchList.addClass('with-filters')},moveSearchButtonBelowFilters:function(){this.dom.searchList.removeClass('with-filters')},createParameterLabel:function(prefix,value,unit,key){var thiz=this,intValue=parseInt(value);if(intValue)value=thiz.formatNumber(value,0);if(intValue||(value=='free'||value=='exchange')){unit=unit&&!(value=='free'||value=='exchange')?' '+unit:'';value=prefix+' '+this.translateValue(value)+unit};return value},createNodeSubcategories:function(categoryID,label,children){var categorySelected=children[categoryID],html='<li class="subcategory" id="param_subcat">',labelNew=label;if(window.lang=='en'){if(label=='Brand'){labelNew='Brand name'}else if(label=='Fuel'){labelNew='Fuel type'}else if(label=='Select category'){labelNew='Category'}else if(label=='Position type')labelNew='Position'}else if(window.lang=='hi')if(label=='Brand'){labelNew='ब्रांड'}else if(label=='Fuel'){labelNew='ईंधन के प्रकार'}else if(label=='Select category'){labelNew='कैटेगरी'}else if(label=='Position type')labelNew='पद';html+='<div class="filter-toplabel">'+labelNew+' </div>';html+='<div class="filter-item rel category-item">';if(!categorySelected)html+='<div class="icon subSelect abs zi2" id="subSelect'+categoryID+'"></div>';html+='<a href="javascript:void(0);" class="button gray block category rel zi3 clr '+(categorySelected?'fbold':'')+'">';html+='<span class="3rd-category-choose-label header block" data-default-label="'+label+'">';html+=label;html+='</span><span class="icon down abs"></span>';html+='</a>';html+='<ul class="small suggestinput bgfff lheight20 br-3 abs hidden subcategories">';html+='<li class="clr brbottdash-2">';html+='<a id="all-categories" class="tdnone block value c000 category-choose category_choose'+categoryID+' search-choose {name: \'search[category_id]\', value: \''+categoryID+'\'}" href="#">';html+='All';html+='</a>';html+='</li>';html+='</ul>';html+='</div>';html+='</li>';return $(html)},createNodeSelectValues:function(key,name,values,$suggest){if(!geoData.params||!geoData.params.search||!geoData.params.search['filter_enum_'+key])$suggest.find('input.all-checkbox').attr('checked','checked');if($suggest.find('input.all-checkbox').length==0){var checkLabel='f-all-filter_enum_'+key;html='<li class="clr brbottdash-2">';html+='<label class="block value c000 lheight18" for="'+checkLabel+'">';html+='<input id="'+checkLabel+'" type="checkbox" class="inlblk all-checkbox {renderformClass: \'inlblk vtop margintop3 marginright5\'}" />';html+='All';html+='</label>';html+='</li>';$(html).appendTo($suggest)};for(var z in values){var label=values[z].replace(/"/g,'&quot;').replace(/'/g,"\\'"),$li=$('<li class="dynamic clr brbott-4 "></li>'),$label=$('<label class="chbox inlblk value c27 lheight18 active-filter" for="f-'+z+'_'+key+'"></label>').appendTo($li);$('<input id="f-'+z+'_'+key+'" type="checkbox" class="inlblk" data-name="'+name+'" data-text="'+label+'" data-value="'+z+'" data-renderform-class="inlblk vtop margintop3 marginright5" />').appendTo($label);var $label2=$('<label class="select-only-this-opiton inlblk value c27 lheight18 active-filter" data-name="'+name+'" data-text="'+label+'" data-value="'+z+'"></label>').appendTo($li);if(key=='car_body')$('<span class="icon rel marginright5 inlblk car '+z+'"></span>').appendTo($label2);$('<span>'+label+'</span>').appendTo($label2);$li.appendTo($suggest)}},createNodeRanges:function(label,name,values,$suggest){var thiz=this,isTo=$suggest.closest('div.filter-item').hasClass('filter-item-to');for(var z in values){var additionlClass='';if(values[z]=='free'||values[z]=='exchange'){if(isTo)continue;if(values[z]=='exchange'&&geoData.params.search&&geoData.params.search['order']&&geoData.params.search['order'].indexOf('filter_float_price')>=0)continue;if(name.indexOf('filter_float_salary')>-1)continue;additionlClass='free-or-exchange-option'};var valueCleared=values[z].replace(/:/g,','),urlValue=valueCleared.replace(new RegExp(thousands_separator,'g'),'').replace(new RegExp('\\'+decimal_separator,'g'),'.');$('<li class="dynamic '+additionlClass+'"><a data-unit="'+label+'" class="tdnone block c27 brbott-4 search-choose" data-name="'+valueCleared+'" data-value="'+urlValue+'" href="javascript:void(0);">'+thiz.createNodeRangesLabel(name,thiz.translateValue(valueCleared),values[z],label)+'</a></li>').appendTo($suggest)}},createNodeRangesLabel:function(name,value,valueOryginal,label){if(config_currency==label)return(valueOryginal=='free'||valueOryginal=='exchange'?'':label)+' '+value;return value+' '+(valueOryginal=='free'||valueOryginal=='exchange'?'':label)},createNodeFilter:function(param,disabled,rand){var unit=param.key==='price'&&!window.module_currencies?window.config_currency:param.suffix,cssClass=param.solr_type=='float'||param.solr_type=='both'?'paramFloat':'paramSelect';if(param.type=="radio")cssClass="paramCheck";if(param.type=="string")cssClass="paramString";var inputName=param.solr_column_name.replace('_both','_float'),html='<li class="param '+cssClass+' '+(disabled?'disabled':'')+'" data-name="search['+inputName+'][]" data-key="'+param.key+'" id="param_'+param.key+'">';if(cssClass=='paramFloat'){var solrName=param.solr_column_name.replace('both','float');if(window.lang=='en'){if(param.key==='price'){html+='<div class="filter-toplabel">Price range</div>'}else if(param.key==='price_per_ft'){html+='<div class="filter-toplabel">Price per sqft</div>'}else if(param.key==='price_per_yd'){html+='<div class="filter-toplabel">Price per sqyd</div>'}else if(param.key==='salary'){html+='<div class="filter-toplabel">Salary range</div>'}else if(param.key==='year'){html+='<div class="filter-toplabel">Year</div>'}else if(param.key==='mileage'){html+='<div class="filter-toplabel">Mileage</div>'}else if(param.key==='ft'){html+='<div class="filter-toplabel">Super builtup area</div>'}else if(param.key==='yd'){html+='<div class="filter-toplabel">Plot area</div>'}else html+='<div class="filter-toplabel"> </div>'}else if(window.lang=='hi')if(param.key==='price'){html+='<div class="filter-toplabel">कीमत की रेंज</div>'}else if(param.key==='price_per_ft'){html+='<div class="filter-toplabel">कीमत प्रति फुट</div>'}else if(param.key==='price_per_yd'){html+='<div class="filter-toplabel">कीमत प्रति यार्ड</div>'}else if(param.key==='salary'){html+='<div class="filter-toplabel">वेतन सीमा</div>'}else if(param.key==='year'){html+='<div class="filter-toplabel">साल</div>'}else if(param.key==='mileage'){html+='<div class="filter-toplabel">मील-दूरी</div>'}else if(param.key==='ft'){html+='<div class="filter-toplabel">एरिया</div>'}else if(param.key==='yd'){html+='<div class="filter-toplabel">एरिया</div>'}else html+='<div class="filter-toplabel"> </div>';html+='<div class="filter-both-item">';var floatSufffixes=['from','to'];for(var z in floatSufffixes){html+='<div class="filter-item filter-item-'+floatSufffixes[z]+' rel numeric-item '+(solrName=='filter_float_price'?'price':'')+' '+(solrName=='filter_float_salary'?'salary':'')+'">';html+='<a href="javascript:void(0);" class="button button-'+floatSufffixes[z]+' numeric gray block fnormal rel zi3 clr">';var rangeName=param.label==='Salary range'?'':param.label+' ',label=rangeName+(floatSufffixes[z]=='from'?'from':'to');html+='<span class="header block" data-default-label="'+label.replace(/"/g,'&quot;').replace(/'/g,"\\'")+'">';html+=label;html+='</span>';html+='<span class="icon down abs"></span>';html+='</a>';html+='<label class="num-input block rel hidden">';html+='<input maxlength="'+(param.key==='salary'?7:((typeof param.validators.max!='undefined')?param.validators.max.toString().length:13))+'" value="" type="text" class="{name: \'search['+solrName+':'+floatSufffixes[z]+']\'} small vtop '+(floatSufffixes[z]=='from'?'min':'max')+'-value-input '+floatSufffixes[z]+'" defaultval="'+(floatSufffixes[z]=='from'?'from':'to')+'..." />';html+='</label>';html+='<ul class="small suggestinput numeric-suggest bgfff lheight20 br-3 abs range hidden" data-unit="'+unit+'"></ul>';html+='</div>'};html+='</div>'}else{var labelNew=param.label;if(window.lang=='en'){if(param.label=='Brand'){labelNew='Brand name'}else if(param.label=='Fuel'){labelNew='Fuel type'}else if(param.label==='locality'){labelNew='Locality'}else if(label=='Select category'){labelNew='Category'}else if(label=='Position type')labelNew='Position'}else if(window.lang=='hi')if(param.label=='Brand'){labelNew='ब्रांड'}else if(param.label=='Fuel'){labelNew='ईंधन के प्रकार'}else if(label=='Select category'){labelNew='कैटेगरी'}else if(label=='Position type')labelNew='पद';if(param.type=="radio"&&param.key=='certification_status'){html+='<div class="filter-item rel"><label class="block value c000 lheight18 margintop35" for="'+param.solr_column_name+'"><input id="'+param.solr_column_name+'" type="checkbox" name="search['+param.solr_column_name+']" value="certified" class="inlblk all-checkbox {renderformClass: \'inlblk vtop margintop3 marginright5\'}" />View only <span class="orange">Certified Cars.</span></label></div>'}else if(param.type=="string"&&param.key=='locality'){html+='<div class="filter-toplabel">'+labelNew+' </div>';html+='<div class="filter-item rel">';html+='<a href="javascript:void(0);" id="localityFilter" class="button button-to numeric gray block fnormal rel zi3 clr">';html+='<span class="header block" data-default-label="'+param.label+'">';html+=param.label;html+='</span>';html+='<span class="icon down abs"></span>';html+='</a>';html+='<div id="regionBox" class="regionrequest locationrequest br5 button button-to numeric gray block fnormal rel zi3 clr hidden">';html+='<div class="rel region-input-container input-container">';html+='<input class="light regioninput ca2" type="text" id="filterRegions" autocomplete="off">';html+='<div class="suggest bottom abs small br3 error hidden">';html+='<span class="target abs icon"></span>';html+='<p></p>';html+='</div>';html+='</div>';html+='<div id="lastUsedCities" class="hidden last-used">Last visited: <ul id="last-locations-ul"></span></div>';html+='</div>';html+='<ul class="small suggestinput string-suggest bgfff lheight20 br-3 abs select hidden" data-unit="'+unit+'">';html+='</ul>';html+='</div>'}else{html+='<div class="filter-toplabel">'+labelNew+' </div>';html+='<div class="filter-item rel">';html+='<a href="javascript:void(0);" class="button gray block fnormal rel zi3 clr">';html+='<span class="header block" data-default-label="'+param.label+'">';html+=param.label;html+='</span>';html+='<span class="icon down abs"></span>';html+='</a>';html+='<ul class="small suggestinput bgfff lheight20 br-3 abs select hidden" data-unit="'+unit+'">';html+='<li class="clr brbottdash-2">';var checkLabel='f-all-'+param.solr_column_name+'_'+rand;html+='<label class="block value c000 lheight18" for="'+checkLabel+'">';html+='<input id="'+checkLabel+'" type="checkbox" class="inlblk all-checkbox {renderformClass: \'inlblk vtop margintop3 marginright5\'}" />';html+='All';html+='</label>';html+='</li>';html+='</ul>';html+='</div>'}};html+='</li>';return $(html)},careteNodesSubcategories:function($subcategory,children){var html='',sort=0;while(true){var has=false;for(var x in children)if(sort==parseInt(children[x]['s'])){html+='<li>';html+='<a class="tdnone block c27 brbott-4 category-choose category_choose'+x+' search-choose" data-name="search[category_id]" data-value="'+x+'" data-code="'+children[x]['code']+'" href="#">';html+=children[x]['label'];html+='<span class="counter counterCategory small abs hidden" data-id="'+x+'"></span>';html+='</a>';html+='</li>';sort++;has=true;break};if(!has)break};return $(html).appendTo($('ul.suggestinput',$subcategory))},careteNodesDistricts:function($districts,children){var html='';for(var x in children){html+='<li>';html+='<a class="tdnone block c27 brbott-4 district-choose district_choose'+children[x]['id']+' search-choose" data-value="'+children[x]['id']+'" data-label="'+children[x]['name']+'" href="#">';html+=children[x]['name'];html+='<span class="counter counterCategory small abs hidden" data-id="'+children[x]['id']+'"></span>';html+='</a>';html+='</li>'};return $(html).appendTo($('ul.suggestinput',$districts))},getCurrentCurrency:function(){var currencySymbol=false,currencyCode=false;if(window.module_currencies){var actualDefaultCurrency=category_id&&currenciesCategories[category_id]?currenciesCategories[category_id]:window.defaultCurrency;for(var z in currencies)if(!geoData.params.currency&&actualDefaultCurrency==z){currencySymbol=currencies[z].symbol;currencyCode=z}else if(geoData.params.currency&&geoData.params.currency==z){currencySymbol=currencies[z].symbol;currencyCode=z}};return currencySymbol?{symbol:currencySymbol,code:currencyCode}:false},initCurrencies:function(){var thiz=this,currencySymbol=thiz.getCurrentCurrency();if(currencySymbol||thiz.isModuleActive('currencies'))$('.numeric-item.price span.header, .numeric-item.salary span.header',thiz.dom.param).each(function(){var $this=$(this),$param=$this.closest('li.param'),key=$param.data('key');if($.inArray(key,window.currencyParams)!=-1){var newLabel=$this.data('defaultLabel');if(currencySymbol){if(newLabel.indexOf(' (')==-1){$this.data('defaultLabelShort',newLabel);newLabel=newLabel+' ('+currencySymbol.symbol+')'}else newLabel=$this.data('defaultLabelShort')+' ('+currencySymbol.symbol+')'}else if($this.data('defaultLabelShort'))newLabel=$this.data('defaultLabelShort');$this.data('defaultLabel',newLabel);!$this.parent().hasClass('fbold')&&$this.html(newLabel)}});return currencySymbol},setSearchParams:function(onlyFreeExchange){var thiz=this;if(!thiz.dom.form.length)return;var searchParams=geoData.params.search;searchParams=searchParams?searchParams:{};if(searchParams.filter_enum_price)if(searchParams.filter_enum_price[0]=='free'){searchParams['filter_float_price:from']='free'}else if(searchParams.filter_enum_price[0]=='exchange')searchParams['filter_float_price:from']='exchange';if(city_id!=''&&(category_id=='3'||root_category_id=='3')){$('#param_locality').removeClass('hidden');if(geoData.currentDistrict){$('#filterRegions').val(geoData.currentDistrict.text);$('.autosuggest-geo-district-input').val(geoData.currentDistrict.id);$('#localityFilter').find('span.header.block').text(geoData.currentDistrict.text);$('#localityFilter').find('.icon').addClass('clear mini').removeClass('down');this.showClearButton()}};var districtID=searchParams.district_id;if(districts&&districtID&&districts[city_id]){var $district=$('#param_district'),children=districts[city_id];for(var x in children)if(children[x]['id']==districtID){$('a.button',$district).addClass('fbold').find('span.header').text(children[x]['name']);break}};var currencySymbol=thiz.initCurrencies(),actualDefaultCurrency=currencySymbol&&category_id&&currenciesCategories[category_id]?currenciesCategories[category_id]:window.defaultCurrency;if(currencySymbol&&actualDefaultCurrency!=currencySymbol.code){var $hidden=$('input[name="currency"]',thiz.dom.form);if(!$hidden.length){$hidden=$('<input type="hidden" name="currency" value="'+currencySymbol.code+'" />').appendTo(thiz.dom.form)}else $hidden.val(currencySymbol.code)}else $('input[name="currency"]',thiz.dom.form).remove();$('li.param',thiz.dom.params).each(function(){var $this=$(this),name=$this.data('name'),paramId=parseInt($this.data('paramId')),key=$this.data('key');if(key=='locality')return;if(window.searchConditions.values[paramId])for(requiredParamId in window.searchConditions.values[paramId]){var requiredVal=[];$('li.param[data-param-id='+requiredParamId+'] .hidden-option').each(function(){requiredVal.push($(this).val())});if(requiredVal.length==1){requiredVal=requiredVal.pop();if(window.searchConditions.values[paramId][requiredParamId][requiredVal]){$this.show()}else{thiz.unbindSelectParam($this);$this.hide()}}else{thiz.unbindSelectParam($this);$this.hide()}};if(onlyFreeExchange&&key!='price'&&key!='type')return;var $select=$('ul.suggestinput',$this),$labelInput=$('label.num-input input',thiz.dom.params),nameHidden=name.substring(7);nameHidden=nameHidden.substring(0,nameHidden.length-3);var names=[nameHidden];if($this.hasClass('paramFloat'))names=[nameHidden,nameHidden+':from',nameHidden+':to'];for(var x in names)if(searchParams[names[x]]){var label='',$button=$('a.button',$this),hName='search['+names[x]+']',hiddenClass='hidden-option',changeInput=true,labelHuman=searchParams[names[x]];if($this.hasClass('paramSelect')){if(onlyFreeExchange&&searchParams[names[x]]&&searchParams[names[x]][0]!='halftime'&&searchParams[names[x]][0]!='practice')return;if(typeof searchParams[names[x]]!='object')searchParams[names[x]]=[searchParams[names[x]]];searchParams[names[x]]=$.unique(searchParams[names[x]]);for(var z in searchParams[names[x]]){var $suggesInput=$this.find('.suggestinput');if(!$suggesInput.hasClass('binded'))thiz.bindSelectParam($this,$suggesInput);if($('#f-'+searchParams[names[x]][z]+'_'+key).length){if(!$('input[value="'+searchParams[names[x]][z]+'"][name="'+hName+'[]"]',$this).length)$('<input class="'+hiddenClass+'" type="hidden" name="'+hName+'[]" value="'+searchParams[names[x]][z]+'">').appendTo($('div.filter-item',$this));var $input=$('#f-'+searchParams[names[x]][z]+'_'+key,$this);if($input.length){$input.attr('checked','checked');if(label)label+=', ';label+=$input.data("text")}}}}else{if(onlyFreeExchange&&searchParams[names[x]]!='free'&&searchParams[names[x]]!='exchange')return;var unit=$select.data('unit');if(names[x].indexOf(':from')!=-1){hiddenClass+=' option-from';if(parseInt(labelHuman)||(names[x+1]&&searchParams[names[x+1]])||(labelHuman=='free'||labelHuman=='exchange')){label=thiz.createParameterLabel(thiz.settings.shortFields?'':'from',labelHuman,unit,key);if(currencySymbol&&labelHuman!='free'&&labelHuman!='exchange'&&($.inArray(key,window.currencyparams)!=-1))label+=' ('+currencySymbol.symbol+')';$button=$('a.button.button-from',$this)}}else if(names[x].indexOf(':to')!=-1){hiddenClass+=' option-to';label=thiz.createParameterLabel(thiz.settings.shortFields?'':'to',labelHuman,unit,key);if(currencySymbol&&labelHuman!='free'&&labelHuman!='exchange'&&($.inArray(key,window.currencyParams)!=-1))label+=' ('+currencySymbol.symbol+')';$button=$('a.button.button-to',$this)}else if(key=='certification_status'&&searchParams[names[x]][0]=="certified")$this.find('input').prop('checked',true);$('<input class="'+hiddenClass+'" type="hidden" name="'+hName+'" value="'+searchParams[names[x]]+'">').appendTo($('.filter-both-item',$this))};if(label){$button.closest('.filter-item').addClass('active');$button.addClass('fbold').find('span.header').html(label);$button.find('.icon').addClass('clear mini').removeClass('down')}else{$button.closest('.filter-item').removeClass('active');$button.removeClass('fbold').find('span.header').each(function(){var $s=$(this);$s.html($s.data('defaultLabel'))})};if($this.hasClass('hidden'))$this.removeClass('hidden');if(changeInput)$labelInput.each(function(){var $label=$(this);if($label.data("name")==hName)$label.val(thiz.translateValue(labelHuman))})}})},categoryChanged:function(categoryID,subcategory,copyAllParams){var thiz=this;categoryID=categoryID?categoryID:0;category_id=categoryID;$('li.param:not(.paramsGroup)',thiz.dom.params).remove();if(!subcategory){$('li.subcategory',thiz.dom.params).remove();if(searchSubcategories[categoryID]){var definition=searchSubcategories[categoryID];$subcategory=thiz.createNodeSubcategories(categoryID,definition.search_label,definition.children).appendTo($('#param-grid-1'));$subcategory.closest('.multifilters').addClass('subSelectActive')}else thiz.dom.params.find('ul.multifilters').removeClass('subSelectActive')};var subcategories=searchSubcategories[categoryID]?searchSubcategories[categoryID].children:[],$seekHidden=$('input[name="search[offer_seek]"]',thiz.dom.form),offerSeek=$seekHidden.length&&$seekHidden.val()==='seek'?'seek':'offer';if($.grep(parameters,function(e){return e.parameter.key=="locality"}).length==0)if((categoryID=='3'||root_category_id=='3'||categoryID=='1309'||categoryID=='1307'||categoryID=='2216'))parameters.push({categories:{'3':5,'1309':9,'1307':9,'1289':9,'1449':9,'1719':9,'1721':9,'1723':9,'1725':9,'1727':9,'1729':9,'1731':9,'1733':9,'2207':9,'2208':9,'2209':9,'2216':9,'2217':9,'2218':9,'2219':9,'2220':9,'2221':9,'2222':9},parameter:{'for':"offer",id:1e5,isNumeric:0,key:"locality",label:"Locality",solr_column_name:"district_id",solr_type:"stying",type:"string"}});for(var x in parameters){var param=parameters[x],has=false,disabled=false,slotID=1,validSeek=!param.parameter['for']||param.parameter['for']=='both'||param.parameter['for']==offerSeek;if(param.categories[categoryID]&&validSeek){slotID=param.categories[categoryID];has=true}else{var found=0,notFound=0;for(var z in subcategories)if(param.categories[z]){found++}else notFound++;if(found){var diff=Math.round((notFound/found)*100);if(diff<=25&&param.parameter.solr_type!=='float'&&param.parameter.solr_type!=='both'){disabled=true;has=true;if($('#param-grid-1').find('.param').length>0)slotID=6;if(sitecode=='olxin'&&param.parameter.key==='model')slotID=1}}};if(has)if(param.parameter.key==='locality'&&!city_id){thiz.createNodeFilter(param.parameter,disabled,x).addClass('hidden').appendTo($('#param-grid-'+slotID))}else thiz.createNodeFilter(param.parameter,disabled,x).appendTo($('#param-grid-'+slotID))};thiz.dom.params=$('#paramsList');thiz.initFilters();if(copyAllParams){thiz.setSearchParams()}else thiz.setSearchParams(true);thiz.toggleSearchButtonFilters();if(thiz.isModuleActive('courier'))if(courierCategories[categoryID]||!categoryID){$('#courier-only').parent().removeClass('hidden')}else $('#courier-only').attr('checked',false).parent().addClass('hidden');if(thiz.dom.params.find('li.param').length){thiz.dom.params.removeClass('hidden')}else thiz.dom.params.addClass('hidden');var link=$("#postNewAdLink").attr('href').split('=');link[1]=categoryID;$("#postNewAdLink").attr('href',link.join('='))},translateValue:function(v){var valueHuman=v;if(valueHuman=='free'){valueHuman='for free'}else if(valueHuman=='exchange')valueHuman='exchange';return valueHuman},initTabs:function(){var thiz=this,tabs={topTabSeek:'offer_seek',topTabOffer:'private_business',topTabPhotos:'photos'},$hidden=$('#pageHidden');for(var x in tabs){var $tabsContainer=$('#tabs-container');$('a.'+x,$tabsContainer).data('key',tabs[x]).click(function(event){if(!history.pushState)return true;var $this=$(this),key=$this.data('key');if(!$hidden.length)$hidden=$('<input type="hidden" id="pageHidden" name="page" />').appendTo(thiz.dom.form);$hidden.val(0);$hidden=$('input[name="search['+key+']"]',thiz.dom.form);if(!$hidden.length)$hidden=$('<input type="hidden" name="search['+key+']" />').appendTo(thiz.dom.form);var val=$this.data('type');if(val=='all'){$hidden.remove()}else $hidden.val(val);if(key=='offer_seek')thiz.categoryChanged(thiz.dom.categoryHidden.val(),false,true);thiz.submitForm(10);return false})}},initViewButtons:function(){var thiz=this;$('a.topTabView',$('#viewSelector')).click(function(){var $this=$(this),$hidden=$('input[name="view"]',thiz.dom.form);if(!$hidden.length)$hidden=$('<input type="hidden" name="view" />').appendTo(thiz.dom.form);$hidden.val($this.data('type'));$this.find('span').click(function(){$.cookie('view',$(this).data("view"),{expires:90,path:'/'})});thiz.submitForm(0,true);return false})},initCurrencyButtons:function(){var thiz=this;if(thiz.isModuleActive('currencies'))thiz.dom.body.on('click','a.currency-link',function(){var $this=$(this);$('input[name="currency"]',thiz.dom.form).remove();var actualDefaultCurrency=category_id&&currenciesCategories[category_id]?currenciesCategories[category_id]:window.defaultCurrency;if(actualDefaultCurrency!=$this.data('currency'))$hidden=$('<input type="hidden" name="currency" value="'+$this.data('currency')+'" />').appendTo(thiz.dom.form);var $param=$('.numeric-item.price,.numeric-item.salary',thiz.dom.params);$param.find('.suggestinput').removeClass('binded').text('');$param.find('input[type="text"]').val('');$param.closest('li').find('input.hidden-option').remove();$param.find('a.button').removeClass('fbold').find('.icon').removeClass('clear mini').addClass('down');thiz.submitForm(0,true);return false})},initTopLinks:function(){var thiz=this,$topLinks=$('#topLinkFilter');thiz.changeCategorySelected();$('#gallerywide > li').click(function(){var $this=$(this),$imageAnchor=$this.find('a.galleryImage');window.location.replace($imageAnchor.attr('href'))});$('#topLinkFilterShowAll').click(function(){$(this).parent().remove();$topLinkItem=$topLinks.find('li');$topLinkItem.filter('.visible').remove();$topLinkItem.filter('.hidden').removeClass('hidden');return false});$('a.topLink',$topLinks).mouseup(function(event){var $this=$(this);if(event.which!=1)return true;if($this.hasClass('parameter')){var key=$this.data('id'),paramKey=$topLinks.data('key'),$liParam=$('#param_'+paramKey);if($liParam.length){thiz.fakeClick=true;$('a.button',$liParam).click();thiz.fakeClick=false;var $input=$('#f-'+key+'_'+paramKey);if($input.length)$input.closest('li').find('label.select-only-this-opiton').click()}}else{var categoryID=$this.data('id');thiz.fakeClick=true;$('#choosecat').click();thiz.fakeClick=false;var $categoryLink=$('#a-category-'+categoryID);if($categoryLink.length){$categoryLink.click()}else{var $subCategories=$('#param_subcat');thiz.fakeClick=true;$('a.button',$subCategories).click();thiz.fakeClick=false;$categoryLink=$('a.category_choose'+categoryID,$subCategories);$categoryLink.click()}};return false})},clearFilters:function(withPriceType){var $paramsBox=$('#paramsList, #searchList'),$filterItems=$('.filter-item',$paramsBox);if(!$filterItems.filter('.price:visible,.filter-item-type:visible').length)withPriceType=true;if(!withPriceType)$filterItems=$filterItems.not('.price,.filter-item-type');$items=$filterItems.not('.category-item');$('.autosuggest-geo-district-input').val('');$('#filterRegions').val('');$('#localityFilter').find('span.header.block').text('Locality');$filterItems.not('.category-item').find('ul.suggestinput label.selected').removeClass('selected');$items.find('ul.suggestinput input:checkbox').attr('checked',false);$items.find('ul.suggestinput input:checkbox.all-checkbox').attr('checked','checked');$items.find('span.header.block').each(function(){var $t=$(this);$t.html($t.data('defaultLabel'))});$filterItems.parent().find('input.hidden-option').remove();$filterItems.not('.category-item').find('input.from, input.to').val('').each(function(){var $s=$(this);$s.val($s.attr('defaultVal'))});$items.find('input.hidden-option').remove();$items.find('a.button').removeClass('fbold').find('.icon').removeClass('clear mini').addClass('down')},initPopState:function(){var thiz=this;if(!history.pushState||(thiz.isChrome()&&thiz.getChromeVersion()<=33))return true;if(!history.state){history.replaceState({init:true},'title',window.location.href);history.pushState({url:window.location.href},'title',window.location.href)};window.onpopstate=function(event){if(thiz.isChrome()&&thiz.getChromeVersion()>34&&$.cookie('from_detail')==="1"){$.cookie('from_detail',0,{path:'/',domain:'.'+window.session_domain});return false};if(event.state!=null&&!event.state.init){location.replace(event.state.url)}else if(event.state!=null&&event.state.init)history.back()}},initFacets:function($parent){var thiz=this,$bodyContainer=thiz.dom.bodyContainer,facets=$bodyContainer.data('facets')?$bodyContainer.data('facets'):{},categoriesStats=facets.categories?facets.categories:{},showFacets=$bodyContainer.data('showfacets'),$counters=$('span.counterCategory',$parent);if(showFacets){$counters.each(function(){var $this=$(this);if(categoriesStats[$this.data('id')]){$this.html(categoriesStats[$this.data('id')]).removeClass('hidden')}else $this.addClass('hidden')})}else $counters.addClass('hidden')},initClearParams:function(){var thiz=this;thiz.dom.clearParams.click(function(){thiz.clearFilters(true);$(this).addClass('hidden');thiz.submitForm(0);return false})},showClearButton:function(){var thiz=this;thiz.dom.clearParams.removeClass('hidden')},showClearButtonIfNeeded:function(){var thiz=this;if(($('li.param',thiz.dom.params).find('a.button.fbold').size()&&window.is_search_category!=='1')||($('.autosuggest-geo-district-input').val()!=""&&$('.autosuggest-geo-district-input').val()!="0")||$('#courier-only:checked').size()){thiz.dom.clearParams.removeClass('hidden')}else thiz.dom.clearParams.addClass('hidden')},initSearchOptions:function(){var thiz=this;$('#photo-only, #title-desc, #courier-only').bind('change',function(){thiz.submitForm()})},initSubmit:function(){var thiz=this;thiz.dom.form.bind('submit',function(event){if(thiz.submitTimer)window.clearTimeout(thiz.submitTimer);thiz.showPageLoader(90,400);if(!thiz.useAjax()){$('<input type="hidden" name="savedefaultlocationincookie" value="1">').appendTo(thiz.dom.form);return true};if(!history.pushState||($.browser.webkit&&!thiz.isSafari()&&thiz.getChromeVersion()<=33))return true;var data=thiz.dom.form.serializeArray(),search={},currency='';for(var i=0,l=data.length;i<l;i++){var key=data[i].name;if(key.indexOf('[')>0){key=key.substring(key.indexOf('[')+1,key.length-1);search[key]=data[i].value};if(key==='currency')currency=data[i].value};geoData.params.search=search;geoData.params.currency=currency;var defaultSearchString,formSerializedData;if(thiz.dom.qInput.val()===thiz.dom.qInput.attr('defaultval')){defaultSearchString=thiz.dom.qInput.val();thiz.dom.qInput.val('');formSerializedData=thiz.dom.form.serialize();thiz.dom.qInput.val(defaultSearchString)}else formSerializedData=thiz.dom.form.serialize();thiz.post('search','list',formSerializedData,function(data){thiz.searchSubmitPostCallback(data)});return false})},searchSubmitPostCallback:function(data){var thiz=this;thiz.cityRegionChanged=false;var $div=thiz.dom.adsContainer.html(data);$('#footerTop').html($('#fakeFooter',$div).detach().html());thiz.initDom();var $bodyContainer=thiz.dom.bodyContainer,url=$bodyContainer.data('ajaxurl');if(url.substring(0,url.indexOf(session_domain))!=document.URL.substring(0,document.URL.indexOf(session_domain))){document.location=url;return false};thiz.dom.bodyContainer.hide().fadeIn();$div.show();if(url!=document.URL){var pageTitle=$bodyContainer.data('pagetitle')?$bodyContainer.data('pagetitle'):'';document.title=pageTitle;history.pushState({url:url},pageTitle,url);var $changeLangLink=$('#changeLang');if($changeLangLink.length)$changeLangLink.attr('href',$changeLangLink.data('baselink'));thiz.historyPushed=true};thiz.stopPageLoader();thiz.showPageLoader(100,200,function(){thiz.hidePageLoader()});thiz.initOrder();thiz.initPrevNext();thiz.initItems();thiz.initFacets(thiz.dom.form);thiz.initFavoritesGalleryBox();thiz.initPager();thiz.initTabs();thiz.initViewButtons();thiz.initTopLinks();thiz.initCurrencies();thiz.initScreening();thiz.initBannersScreening();thiz.setSearchParams(true);thiz.initSkyscraper();thiz.initFooterCategories();ObserveObject.bindClicks();setTimeout(function(){ObserveObject.listReloaded();ObserveObject.updateList()},100);var category_id=thiz.dom.categoryHidden.val(),$link=$('#a-category-'+category_id);if($link.length){thiz.dom.categoryList.find('li.selected').removeClass('selected');if(category_id)$link.parents('li').addClass('selected')};$('input[type="text"]',thiz.dom.form).each(function(){var $this=$(this);if($this.val()==''&&$this.attr('defaultval')&&!$this.is(':focus'))$this.val($this.attr('defaultval'))});var $param=$('.numeric-item.price,.numeric-item.salary',thiz.dom.params);$param.find('.suggestinput').removeClass('binded').text('');$param.find('input[type="text"]').blur();thiz.initAdsense(true);if(typeof _gaq!='undefined')_gaq.push(['_trackPageview']);$(window).trigger('ajaxReady');if(getCookie('filterChange')){var dataObj=window.hydraData,len=dataObj.length-1;window.dataLayer.push({trackEvent:['listing_tap_apply_filters'],pageName:'Listing',user_id:dataObj[len].userId,origin:"listing",category_level1_id:dataObj[len].categoryLevel1Id,category_level1_id:dataObj[len].categoryLevel1Id,filter_applied:dataObj[len].extraPageName?dataObj[len].extraPageName.hydra:'NA'});document.cookie="filterChange=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"}},unbindSelectParam:function($li){var paramId=$li.data('paramId');$li.find('.icon.clear').click();$suggesInput=$li.find('.suggestinput');$suggesInput.removeClass('binded');$suggesInput.html('');$suggesInput.hide();for(dependingParamId in window.searchConditions.values)if(paramId in window.searchConditions.values[dependingParamId])this.unbindSelectParam($('li.param[data-param-id='+dependingParamId+']'))},bindSelectParam:function($li,$suggesInput){var thiz=this;$suggesInput.addClass('binded');var paramId=$li.data('paramId'),key=$li.data('key'),name=$li.data('name');for(var x in window.searchValues){var keys=window.searchValues[x]['k'],categories=window.searchValues[x]['c'];if(keys[key]&&categories[category_id]){var values=window.searchValues[x]['v'];if(paramId in window.searchConditions.values){for(requiredParamId in window.searchConditions.values[paramId]){var requiredVal=[];$('li.param[data-param-id='+requiredParamId+'] .hidden-option').each(function(){requiredVal.push($(this).val())});if(requiredVal.length==1){requiredVal=requiredVal.pop();var allowedOptions=window.searchConditions.values[paramId][requiredParamId][requiredVal];if(typeof allowedOptions!='undefined'){var filteredValues={};for(var i=0;i<allowedOptions.length;i++)filteredValues[allowedOptions[i].key]=allowedOptions[i].value;thiz.createNodeSelectValues(key,name,filteredValues,$suggesInput)}}}}else thiz.createNodeSelectValues(key,name,values,$suggesInput)}};$('.select-only-this-opiton',$suggesInput).bind('click touchstart',function(e){var $thiz=$(this),$parent=$thiz.closest('div.filter-item'),$header=$parent.find('span.header'),$aButton=$parent.find('a.button'),$bothFiltersDiv=$thiz.closest('div.filter-item');$bothFiltersDiv.find('input.hidden-option').remove();$thiz.closest('ul').find('li input[type="checkbox"]').each(function(){var $checkbox=$(this);if($checkbox.data("value")!=$thiz.data("value")){$checkbox.removeAttr('checked').change()}else{$checkbox.attr('checked','checked').change();$bothFiltersDiv.append('<input class="hidden-option" type="hidden" name="'+$thiz.data("name")+'" value="'+$thiz.data("value")+'">')}});$header.html($thiz.data("text"));$aButton.addClass('fbold').find('.icon').addClass('clear mini').removeClass('down hidden');for(dependingParamId in window.searchConditions.values)if(paramId in window.searchConditions.values[dependingParamId])thiz.unbindSelectParam($('li.param[data-param-id='+dependingParamId+']'));thiz.dom.params.find('.suggestinput').hide();thiz.submitForm(100)});$('input[type="checkbox"]',$suggesInput).bind('click touchstart',function(e){var $thiz=$(this);e.stopPropagation();var $bothFiltersDiv=$thiz.closest('div.filter-item'),$header=$bothFiltersDiv.find('span.header'),$aButton=$bothFiltersDiv.find('a.button');if($thiz.hasClass('all-checkbox')){$header.html($header.data('defaultLabel'));$bothFiltersDiv.find('input.hidden-option').remove();$thiz.closest('ul').find('li input[type="checkbox"]').filter(':checked').each(function(){$(this).removeAttr('checked').change()});$thiz.attr('checked','checked').change();$aButton.removeClass('fbold').find('.icon').removeClass('clear mini').addClass('down')}else{var text=new Array(),options=new Array(),checked=0;$thiz.closest('ul').find('li input[type="checkbox"]').filter(':checked').each(function(){var $t=$(this);if($t.hasClass('all-checkbox')){$t.removeAttr('checked').change()}else{checked++;$t.attr('checked','checked').change()};if($t.data("text")){text.push($t.data("text"));options.push($t.data("value"))}});if(checked==0)$thiz.closest('ul').find('li input[type="checkbox"].all-checkbox').attr('checked','checked').change();$header.html(!text.length?$header.data('defaultLabel'):text.join(', '));$bothFiltersDiv.find('input.hidden-option').remove();for(i in options)$bothFiltersDiv.append('<input class="hidden-option" type="hidden" name="'+$thiz.data("name")+'" value="'+options[i]+'">');if(options.length>0){$aButton.addClass('fbold').find('.icon').addClass('clear mini').removeClass('down hidden')}else $aButton.removeClass('fbold').find('.icon').removeClass('clear mini').addClass('down hidden')};thiz.submitForm(600)})},initFilters:function(){var thiz=this,$filterItems=$('.filter-item',thiz.dom.params),timerID=null;$filterItems.mouseleave(function(){var $this=$(this);timerID=window.setTimeout(function(){$this.find('.suggestinput').hide();$this.removeClass('filterActive');$('input.max-value-input:visible, input.min-value-input:visible, a.button:visible',thiz.dom.params).each(function(){var $divFilterItem=$(this).closest('div.filter-item, div.filter-both-item');$divFilterItem.find('a.button').removeClass('hidden');$divFilterItem.find('label.num-input').addClass('hidden');$divFilterItem.find('.suggestinput').hide()})},500)}).mouseenter(function(){if(timerID!=null)window.clearTimeout(timerID)});$('#filterRegions').blur(function(){var $autosuggest=$('#filterRegionsAutosuggest');$autosuggest.addClass('hidden');$('#localityFilter').removeClass('hidden');$('#regionBox').addClass('hidden')});$('#filterRegions').keyup(function(){var $this=$(this),val=$this.val().toLowerCase(),valLength=val.length;if(valLength==0)$('#localityFilter').find('span.header.block').text('Locality');var $autosuggest=$('#filterRegionsAutosuggest');if(!$autosuggest.length)$autosuggest=$('<ul id="filterRegionsAutosuggest" class="suggestgeo suggestRegion bgfff normal br-3 abs hidden"></ul>').insertAfter($this);var has=false;if(valLength>3){$autosuggest.find('li').remove();for(var x in districtData.districtsData.data){var region=districtData.districtsData.data[x],name=region.text.toLowerCase();if((valLength>3&&name.indexOf(val)!=-1)){$('<li><a href="#" class="regionSelectA1 tdnone title block c000 brtop-5 nowrap">'+region.text+'</a></li>').appendTo($autosuggest).find('a').data('name',region.text).data('id',region.id).mousedown(function(regionObject){return function(){$('#filterRegions').val(regionObject.text);$('.autosuggest-geo-district-input').val(regionObject.id);$('#filterRegionsAutosuggest').addClass('hidden');$('#localityFilter').find('span.header.block').text(regionObject.text);$('#localityFilter').find('.icon').addClass('clear mini').removeClass('down');thiz.submitForm(23)}}(region));has=true}}};if(has){var items=$autosuggest.find('li');items.sort(function(a,b){var chA=$(a).text(),chB=$(b).text();if(chA<chB)return-1;if(chA>chB)return 1;return 0});$autosuggest.append(items);$autosuggest.removeClass('hidden')}}).focus();if(!thiz.isTouchDevice())$('ul.suggestinput, ul.numeric-suggest',thiz.dom.params).bind('mousewheel DOMMouseScroll',function(e){var $this=$(this);if($this.get(0).scrollHeight>$this.height()){var scrollTo=null;if(e.type=='mousewheel'){scrollTo=(e.originalEvent.wheelDelta*-1)}else if(e.type=='DOMMouseScroll')scrollTo=40*e.originalEvent.detail;if(scrollTo){e.preventDefault();$this.scrollTop(scrollTo+$this.scrollTop())}};e.stopPropagation()});var $buttons=$('a.button',$filterItems).bind('click touchstart',function(){var $this=$(this),$li=$this.closest('li');if($li.hasClass('disabled'))return false;thiz.fakeClick=$this.hasClass('fakeClick');$filterItems.each(function(){var $t=$(this);$t.find('.suggestinput').hide();$t.removeClass('filterActive');$t.find('a.button').removeClass('hidden');$t.find('label.num-input').addClass('hidden')});$this.siblings('.numeric-suggest').hide();thiz.dom.categoryList.hide();var $suggesInput=$this.siblings('.suggestinput');if($suggesInput.is(':visible')){$suggesInput.hide()}else{if(!$suggesInput.hasClass('binded')){$suggesInput.addClass('binded');if($suggesInput.hasClass('districts')){var children=districts[city_id],$districts=thiz.careteNodesDistricts($li,children);$('a.district-choose',$districts.parent()).click(function(){var $this=$(this),$aButton=$this.closest('div.filter-item').find('a.button'),id=$this.data("value");$this.closest('div.filter-item').find('.suggestinput').hide();$aButton.addClass('fbold');if($this.attr('id')=='all-categories'){$aButton.removeClass('fbold').find('span.header').text('District');$this.closest('div.filter-item').find('.subSelect').removeClass('hidden')}else{$this.closest('div.filter-item').find('.subSelect').addClass('hidden');$aButton.find('span.header').text($this.data("label"))};thiz.submitForm(50);return false})}else if($suggesInput.hasClass('subcategories')){var children=searchSubcategories[category_id]?searchSubcategories[category_id].children:searchSubcategories[$suggesInput.find('#all-categories').data("value")].children,$subcategories=thiz.careteNodesSubcategories($li,children);thiz.initFacets($subcategories);$('a.category-choose',$subcategories.parent()).click(function(){var $this=$(this),$aButton=$this.closest('div.filter-item').find('a.button'),id=$this.data("value");$('#searchFormCatID').val(id);$('li.param a.button.fbold',thiz.dom.params).removeClass('fbold');var $cloned=$this.clone();$cloned.find('span').remove();$this.closest('div.category-item').find('span.3rd-category-choose-label').text($cloned.text());$cloned.remove();$this.closest('div.filter-item').find('.suggestinput').hide();$aButton.addClass('fbold');if($this.attr('id')=='all-categories'){$aButton.removeClass('fbold');$this.closest('div.filter-item').find('.subSelect').removeClass('hidden')}else $this.closest('div.filter-item').find('.subSelect').addClass('hidden');$('input[name="search[offer_seek]"]',thiz.dom.form).remove();thiz.categoryChanged(id,true,true);thiz.submitForm(50);return false})}else if($suggesInput.hasClass('select')){thiz.bindSelectParam($li,$suggesInput)}else if($suggesInput.hasClass('range')){var key=$li.data('key'),name=$li.data('name'),catID=category_id?category_id:0,has=false;for(var x in window.searchRanges){var ranges=window.searchRanges[x],keys=ranges.k,categories=ranges.c;if(keys[key]&&categories[catID]){has=true;break}};if(!has)catID=0;for(var x in window.searchRanges){var ranges=window.searchRanges[x],keys=ranges.k,categories=ranges.c;if(keys[key]&&categories[catID]){var rangeKey='v',currencySymbol=thiz.getCurrentCurrency(),label=ranges.s[key];if(window.module_currencies)if($.inArray(key,window.currencyParams)!=-1){if(!currencySymbol)currencySymbol={code:defaultCurrency,symbol:currencies[defaultCurrency]['symbol']};if(ranges['v_'+currencySymbol.code])rangeKey='v_'+currencySymbol.code;if(currencySymbol.symbol){label=currencySymbol.symbol;$suggesInput.data('unit',currencySymbol.symbol)}};if(ranges[rangeKey]){var values=ranges[rangeKey].split(',');thiz.createNodeRanges(label,name,values,$suggesInput)};break}};$this.find('div.filter-item-to').find('li.free-or-exchange-option').remove();$('a.search-choose',$suggesInput).click(function(){var $this=$(this),$item=$this.closest('div.filter-item'),$li=$item.closest('li.param'),key=$li.data('key'),$select=$item.find('ul.suggestinput'),$input=$item.find('input.min-value-input, input.max-value-input'),$header=$item.find('span.header'),$aButton=$item.find('a.button'),$bothFiltersDiv=$this.closest('div.filter-both-item');$input.val(thiz.translateValue($this.data("value"))).removeClass('ca2');$bothFiltersDiv.find('input.hidden-option.option-free-ex').remove();var $from=$bothFiltersDiv.find('input.hidden-option.option-from'),$to=$bothFiltersDiv.find('input.hidden-option.option-to'),unit=$this.data('unit');if($input.hasClass('from')){$bothFiltersDiv.find('input.hidden-option.option-from').remove();$bothFiltersDiv.append('<input class="hidden-option option-from" type="hidden" name="'+$input.data("name")+'" value="'+$this.data("value")+'">');$header.html(thiz.createParameterLabel(thiz.settings.shortFields?'':'from',$this.data("value"),unit,key))}else{$bothFiltersDiv.find('input.hidden-option.option-to').remove();$bothFiltersDiv.append('<input class="hidden-option option-to" type="hidden" name="'+$input.data("name")+'" value="'+$this.data("value")+'">');$header.html(thiz.createParameterLabel(thiz.settings.shortFields?'':'to',$this.data("value"),unit,key))};if($from.val()=='exchange'){$to.remove();$select.find('input.to').val('')};$aButton.addClass('fbold').find('.icon').addClass('clear mini').removeClass('down');var $divFilterItem=$this.closest('div.filter-item');$divFilterItem.find('a.button').removeClass('hidden');$divFilterItem.find('label.num-input').addClass('hidden');thiz.dom.params.find('.suggestinput').hide();thiz.submitForm(10)});$('input.max-value-input, input.min-value-input',$li).keydown(function(e){var $this=$(this);if($this.val()=='provide value'){$this.val('');$this.removeClass('ca2')};if(e.keyCode>=96&&e.keyCode<=105){var val=parseInt($this.val());if(val>999999999999)return false;return true};if(e.keyCode==46||e.keyCode==8||(e.keyCode>=48&&e.keyCode<=57))return true;if(e.keyCode==13){thiz.dom.params.find('.suggestinput').hide();return true};if($this.val().length>13)return false;var datePattern=/float_year/;if(datePattern.test($this.data("name"))&&$this.val().length>=4)return false;var v=String.fromCharCode(e.keyCode);if(!/\d/.test(v))return false}).keyup(function(e){var $this=$(this),val=$this.val(),$select=$this.closest('div.filter-item').find('ul.suggestinput'),pricePattern=/float_price/;if(val=='0'&&$this.hasClass('from')&&pricePattern.test($this.data("name")))val='free';var $input=$this,$parent=$this.closest('div.filter-item'),$li=$parent.closest('li.param'),key=$li.data('key'),$header=$parent.find('span.header'),$aButton=$parent.find('a.button'),$bothFiltersDiv=$this.closest('div.filter-both-item'),unit=$select.data('unit');$bothFiltersDiv.find('input.hidden-option.option-free-ex').remove();if($input.hasClass('from')){$bothFiltersDiv.find('input.hidden-option.option-from').remove();$bothFiltersDiv.append('<input class="hidden-option option-from" type="hidden" name="'+$this.data("name")+'" value="'+val+'">');var textFrom=thiz.createParameterLabel(thiz.settings.shortFields?'':'from',val,unit,key);$header.html(textFrom)}else{$bothFiltersDiv.find('input.hidden-option.option-to').remove();$bothFiltersDiv.append('<input class="hidden-option option-to" type="hidden" name="'+$this.data("name")+'" value="'+val+'">');var textTo=thiz.createParameterLabel(thiz.settings.shortFields?'':'to',val,unit,key);$header.html(textTo)};var $from=$bothFiltersDiv.find('input.hidden-option.option-from'),$to=$bothFiltersDiv.find('input.hidden-option.option-to');if($input.val()){$aButton.addClass('fbold').find('.icon').addClass('clear mini').removeClass('down')}else $aButton.removeClass('fbold').find('.icon').removeClass('clear mini').addClass('down');if(val!=='')thiz.submitForm(1200)}).blur(function(e){var $this=$(this),$divFilterItem=$this.closest('div.filter-item');$divFilterItem.find('a.button').removeClass('hidden');$divFilterItem.find('label.num-input').addClass('hidden');var $s=$divFilterItem.find('span.header');if(!$this.val()||$this.val()=='provide value'||$this.val()==$this.attr('defaultval')){$s.html($s.data('defaultLabel'));$s.closest('a.button').removeClass('fbold')}})}};if(!thiz.fakeClick){$suggesInput.css('maxHeight','');if($suggesInput.css('maxHeight')){var defaultMaxHeight=$suggesInput.css('maxHeight').replace('px',''),defaultMaxHeight=$suggesInput.css('maxHeight').replace('px',''),viewportMaxHeight=$(window).height()-$this.offset().top-60;$suggesInput.css({maxHeight:defaultMaxHeight>viewportMaxHeight?defaultMaxHeight:viewportMaxHeight}).show().removeClass('hidden')}}};$this.parent('.filter-item').addClass('filterActive');if($suggesInput.hasClass('numeric-suggest')){var $divFilterItem=$this.closest('div.filter-item');$divFilterItem.find('a.button').addClass('hidden');$divFilterItem.find('label.num-input').removeClass('hidden');$input=$divFilterItem.find('label.num-input input');if($input.val()==$input.attr('defaultval'))$input.val('');if($input.val()==''){!thiz.settings.shortFields&&$input.val('provide value');$input.addClass('ca2');$input.setSelection(0,0)}else if($input.val()=='provide value'){$input.setSelection(0,0)}else{var inputLength=$input.val().length;$input.setSelection(inputLength,inputLength)}};if($suggesInput.hasClass('string-suggest')){$suggesInput.css('display','none');var $divFilterItem=$this.closest('div.filter-item');$divFilterItem.find('a.button').addClass('hidden');$divFilterItem.find('div.locationrequest').removeClass('hidden');$divFilterItem.find('div.locationrequest').find('input').focus()};return false});$('.icon',$buttons).click(function(){var $this=$(this);if($this.hasClass('clear')){$this.removeClass('clear mini').addClass('down');var $button=$this.closest('a.button');$button.removeClass('fbold');var $header=$('span.header',$button);$header.html($header.data('defaultLabel'));var name=$this.closest('div.filter-item').find('input').val('').data("name");if(name){var $item=$button.closest('li.param');$item.find('input.hidden-option[name="'+name+'"]').remove()}else{var $item=$this.closest('div.filter-item');$item.find('input.hidden-option').remove();$item.find('ul.suggestinput input[type="checkbox"]').removeAttr('checked').change().filter('.all-checkbox').attr('checked','checked')};if($item.find('#localityFilter').length!=0)$('.autosuggest-geo-district-input').val('');var paramId=$this.closest('li.param').data('paramId');for(dependingParamId in window.searchConditions.values)if(paramId in window.searchConditions.values[dependingParamId])thiz.unbindSelectParam($('li.param[data-param-id='+dependingParamId+']'));thiz.submitForm(50);return false}});$('input[type="text"]',$filterItems).focus(function(){$this=$(this);if($this.val()==$this.attr('defaultval'))$this.val('')}).blur(function(){$this=$(this);if($this.val()==''||$this.val()==$this.attr('defaultval'))$this.val($this.attr('defaultval'))})},initSeoLocationsFooter:function(){$('#showAllLocChildren').click(function(){$(this).remove();$('#locationLinks').find('li.hidden').show();return false})},initGoToTop:function(){var thiz=this,$goTop=$("<a id=\"gotop\" class=\"fix bgfff br-1 tdnone normal color-1 tcenter\" style=\"display:none; bottom:0px\"><span class=\"inlblk icon gotop margintop5\">&nbsp;</span></a>");thiz.dom.body.append($goTop);$goTop.click(function(){$('html, body').animate({scrollTop:0},'slow');return false});var halfContent=parseInt(thiz.dom.bodyContainer.height()/3),$html=$(document)
function getPositionGoTop(){if($(window).width()>1e3){if(!thiz.positionContent){thiz.positionContent=$('.content',thiz.dom.bodyContainer).offset();thiz.widthContent=$('.wrapper',thiz.dom.bodyContainer).outerWidth()};if(thiz.positionContent!==undefined)$goTop.css({left:thiz.positionContent.left+thiz.widthContent-5})}else $goTop.css({left:'auto',right:5});if($html.scrollTop()>halfContent){$goTop.fadeIn()}else $goTop.fadeOut()};if($html.scrollTop()>halfContent)getPositionGoTop();$(window).scrolled(100,function(){getPositionGoTop()});$(window).resize(function(){thiz.positionContent=false;getPositionGoTop()})},initAdsense:function(ajax){if(useExternalScripts&&typeof AdsenseClass!='undefined'){this.executeAdsense(ajax)}else setTimeout(function(){this.executeAdsense(ajax)},150)},executeAdsense:function(ajax){var thiz=this;if(useExternalScripts&&typeof AdsenseClass!='undefined'){if(!ajax)thiz.adsense=new AdsenseClass();thiz.adsense.setQuery(q);thiz.adsense.setRegionName(regionName);thiz.adsense.setSubregionName(subregionName);thiz.adsense.setCategory(category_id,categoryName,categoryCode,categoryAdsenseText);thiz.adsense.setRootCategory(root_category_id,rootCategoryName,rootCategoryCode,rootCategoryAdsenseText);thiz.adsense.setL2Category(second_category_id,second_category_code);thiz.adsense.setSeoPageName(setSeoPageName);var containers={'google-ads-container-top':2};$(".google-ads-container-list").each(function(index){containers[$(this).attr('id')]=1});if(q){if(totalAds>0){containers.adcontainer3=3}else containers.adcontainer3=5;thiz.adsense.addAdsenseForSearchBlockListing(ajax,containers,totalAds>0?'asf':'asf_empty')}else{containers['google-ads-container3']=3;thiz.adsense.addAdsenseForContentBlockListing(ajax,containers,"listing")};if(ajax&&(typeof loadAdocean=='function'))loadAdocean()}},initFavoritesGalleryBox:function(){ObserveObject.scale($('li > .card',$('#favsearchgallerybox')),0.35);var $galleryBox=$('#favoritesGalleryBox');if(!$galleryBox.length)return;$('ul.tabsfav > li',$galleryBox).click(function(e){var $this=$(this),$tab=$this.children('span');if(!$tab.hasClass('selected')){if($this.hasClass('lastSeen')){ObserveObject.getContentTab('lastSeen',typeof e.originalEvent!='undefined')}else if($this.hasClass('observedAds')){ObserveObject.getContentTab('observedAds',typeof e.originalEvent!='undefined')}else if($this.hasClass('observedSearches'))ObserveObject.getContentTab('observedSearches',typeof e.originalEvent!='undefined');$galleryBox.find('ul.tabsfav > li > span').removeClass('selected');$tab.addClass('selected')}});$('a.observeChange',$('#tab-lastSeen')).click(function(e){e.preventDefault();var $this=$(this),$icon=$this.find('span'),adId=$this.data("adId");if($icon.hasClass('selected')){ObserveObject.removeAdFromObserved(adId,$('.observed-'+adId).parent())}else ObserveObject.addAdToObserved(adId,$('.observed-'+adId).parent())});if(window.location.href.search('#tab-')>0){var tabName=window.location.href.substr(window.location.href.search('#tab-')+5,window.location.href.length),$liTab=$galleryBox.find('li.'+tabName);if($liTab.not('.hidden').length>0){$liTab.click()}else $('> ul > li',$galleryBox).not('.hidden').first().click()}else $('> ul > li',$galleryBox).not('.hidden').first().click()},useAjax:function(){return true},formatNumber:function(number,decimals){return number;var s=number<0?'-':'',i=parseInt(number=Math.abs(+number||0).toFixed(decimals))+'',j=(j=i.length)>3?j%3:0;return s+(j?i.substr(0,j)+thousands_separator:'')+i.substr(j).replace(/(\d{3})(?=\d)/g,"$1"+thousands_separator)+(decimals?decimal_separator+Math.abs(number-i).toFixed(decimals).slice(2):'')},geolocation:function(){var dfd=$.Deferred(),errorText='Fail to read your position';if(navigator.geolocation&&('getCurrentPosition'in navigator.geolocation)){navigator.geolocation.getCurrentPosition(function(position){$(this).trigger('geolocalized',[position.coords]);dfd.resolve(position.coords)},function(error){switch(error.code){case error.PERMISSION_DENIED:errorText=errorText;break;case error.POSITION_UNAVAILABLE:errorText=errorText;break;case error.TIMEOUT:errorText=errorText+' (Timeout)';break;case error.UNKNOWN_ERROR:errorText=errorText;break};if(!error||typeof error!=='object')error={};error.value=errorText;dfd.reject(error)},{timeout:5e3})}else{error={};error.value=errorText;dfd.reject(error)};return dfd.promise()},initGeoAutoSuggest:function(){var thiz=this,isRegionSelected=false,hasResults=true;if(!isRegionSelected&&hasResults&&$.cookie('i2GeoSuggest')!=1)$.when(thiz.geolocation()).then(function(data){$.get(www_base+'/i2/ajax/suggest/city/',{lon:data.longitude,lat:data.latitude,suggest:'1'},function(data){if(data!=''){$container=$('.chooselocationPop');$links=$container.find('ul');$links.html(data);$container.show();$.fn.geosuggest.bindAutoSuggestCitiesLinks($container,$.fn.geosuggest.settings);$container.find('a.close').click(function(e){e.preventDefault();$.cookie('i2GeoSuggest','1',{expires:null,path:'/',domain:'.'+session_domain});$container.remove()})}})})},changeCategorySelected:function(){var innerTopLinkFilter,showAllTopLinkFilter;showAllTopLinkFilter=$('#paramsList #topLinkFilter .all');if(showAllTopLinkFilter.length==0){$('#paramsList #topLinkFilter').append('<div class="all"></div>');showAllTopLinkFilter=$('#paramsList #topLinkFilter .all')};showAllTopLinkFilter.empty();var topLinkHtml=$('#listContainer #topLink .inner').html(),showAllTopLinkHtml=$('#listContainer #topLink .all').html();if(topLinkHtml!=null){if($('#paramsList #topLinkFilter').length==0)$('#paramsList').prepend('<div data-key="" class="toplinks x-normal" id="topLinkFilter"><div class="inner"></div></div>');innerTopLinkFilter=$('#paramsList #topLinkFilter .inner');innerTopLinkFilter.empty();$('#paramsList').removeClass('hidden');$('#paramsList #topLinkFilter').css('display','block');innerTopLinkFilter.prepend($('#listContainer #topLink .inner').html());if(showAllTopLinkHtml!=null){showAllTopLinkFilter.removeClass('hidden').prepend($('#listContainer #topLink .all').html());showAllTopLinkFilter.find('a#topLinkShowAll').attr('id','topLinkFilterShowAll')}else showAllTopLinkFilter.addClass('hidden')}else $('#paramsList #topLinkFilter').css('display','none');if(innerTopLinkFilter!==undefined){innerTopLinkFilter.find('ul').each(function(data){$this=$(this);if($.trim($this.text())=='')$this.remove()});innerTopLinkFilter.attr('class','inner');innerTopLinkFilter.addClass('totalL3Column'+innerTopLinkFilter.find('ul').length);innerTopLinkFilter.find('li').each(function(data){var counterSpan=$(this).find('.counter');if($(this).find('.counter').text()=="1")counterSpan.addClass('singleAd')})}}});AdsClass=AdsClass.extend({init:function(){this._super()},createNodeRangesLabel:function(name,value,valueOryginal,label){var price=this._super(name,value,valueOryginal,label),rupeeSymbol="₹";if(label===rupeeSymbol)price='<span class="inr_symbol_small"></span>'+price.replace(rupeeSymbol,"");return price},initFilters:function(){this._super();var thiz=this;$('.paramsList input[id="filter_enum_certification_status"]').click(function(){thiz.submitForm(50)})},clearFilters:function(withPrice){var $paramsBox=$('#paramsList, #searchList'),$filterItems=$('.filter-item',$paramsBox);this._super(withPrice);$items=$filterItems.not('.category-item');$items.find('input:checkbox').prop('checked',false)},showClearButtonIfNeeded:function(){this._super();var certificationCheckBox=$('.paramsList input[id="filter_enum_certification_status"]');if(certificationCheckBox.length>0)if(this.dom.clearParams.hasClass('hidden')){if(certificationCheckBox.prop('checked'))this.dom.clearParams.removeClass('hidden')}else if(!certificationCheckBox.prop('checked'))this.dom.clearParams.addClass('hidden')}});$(function(){ads=new AdsClass()});(function(e){function t(t,n){function w(){r.update();S();return r}function E(){var e=d.toLowerCase();f.obj.css(p,v/u.ratio);o.obj.css(p,-v);g.start=f.obj.offset()[p];u.obj.css(e,a[n.axis]);a.obj.css(e,a[n.axis]);f.obj.css(e,f[n.axis])}function S(){if(!y){f.obj.bind("mousedown",x);a.obj.bind("mouseup",N);var e;l.obj.mousedown(function(){b.obj.addClass("noSelect");clearInterval(e);e=setInterval(C,50)}).mouseup(function(){b.obj.removeClass("noSelect");clearInterval(e)});c.obj.mousedown(function(){b.obj.addClass("noSelect");clearInterval(e);e=setInterval(k,50)}).mouseup(function(){b.obj.removeClass("noSelect");clearInterval(e)});l.obj.bind("click",function(){clearInterval(e);C();return false});c.obj.bind("click",function(){clearInterval(e);k();return false})}else{var e;f.obj[0].ontouchstart=function(e){if(1===e.touches.length){x(e.touches[0]);e.stopPropagation()}};l.obj.bind("touchstart",function(){b.obj.addClass("noSelect");clearInterval(e);e=setInterval(C,50)}).bind("touchend",function(){b.obj.removeClass("noSelect");clearInterval(e)});c.obj.bind("touchstart",function(){b.obj.addClass("noSelect");clearInterval(e);e=setInterval(k,50)}).bind("touchend",function(){b.obj.removeClass("noSelect");clearInterval(e)})}if(n.scroll&&window.addEventListener){i[0].addEventListener("DOMMouseScroll",T,false);i[0].addEventListener("mousewheel",T,false)}else if(n.scroll){i[0].onmousewheel=T}}function x(t){e("body").addClass("noSelect");var n=parseInt(f.obj.css(p),10);g.start=h?t.pageX:t.pageY;m.start=n=="auto"?0:n;if(!y){e(document).bind("mousemove",N);e(document).bind("mouseup",L);f.obj.bind("mouseup",L)}else{document.ontouchmove=function(e){e.preventDefault();N(e.touches[0])};document.ontouchend=L}}function T(t){if(o.ratio<1){var r=t||window.event,i=r.wheelDelta?r.wheelDelta/120:-r.detail/3;v-=i*n.wheel;v=Math.min(o[n.axis]-s[n.axis],Math.max(0,v));f.obj.css(p,v/u.ratio);o.obj.css(p,-v);if(n.lockscroll||v!==o[n.axis]-s[n.axis]&&v!==0){r=e.event.fix(r);r.preventDefault()}}}function N(e){if(o.ratio<1){if(n.invertscroll&&y){m.now=Math.min(a[n.axis]-f[n.axis],Math.max(0,m.start+(g.start-(h?e.pageX:e.pageY))))}else{m.now=Math.min(a[n.axis]-f[n.axis],Math.max(0,m.start+((h?e.pageX:e.pageY)-g.start)))}v=m.now*u.ratio;o.obj.css(p,-v);f.obj.css(p,m.now)}}function C(){o.ratio=s[n.axis]/o[n.axis];u.obj.toggleClass("disable",o.ratio>=1);if(v>10){v-=10}else{v=0}E()}function k(){o.ratio=s[n.axis]/o[n.axis];u.obj.toggleClass("disable",o.ratio>=1);iScrollBottom=o.ratio<=1?o[n.axis]-s[n.axis]:isNaN(parseInt(sScroll,10))?v:parseInt(sScroll,10);if(iScrollBottom-v>10){v+=10}else{v=iScrollBottom}E()}function L(){e("body").removeClass("noSelect");e(document).unbind("mousemove",N);e(document).unbind("mouseup",L);f.obj.unbind("mouseup",L);document.ontouchmove=document.ontouchend=null}var r=this,i=t,s={obj:e(".viewport",t)},o={obj:e(".overview",t)},u={obj:e(".scrollbar",t)},a={obj:e(".track",u.obj)},f={obj:e(".thumb",u.obj)},l={obj:e(".scrollbarup",u.obj)},c={obj:e(".scrollbardown",u.obj)},h=n.axis==="x",p=h?"left":"top",d=h?"Width":"Height",v=0,m={start:0,now:0},g={},y="ontouchstart"in document.documentElement,b={obj:e("body")};this.update=function(e){if(n.arrowsInside){u.obj.css("marginTop",18)}s[n.axis]=s.obj[0]["offset"+d]-(n.arrowsInside?36:0);o[n.axis]=o.obj[0]["scroll"+d]-(n.arrowsInside?36:0);o.ratio=s[n.axis]/o[n.axis];u.obj.toggleClass("disable",o.ratio>=1);a[n.axis]=n.size==="auto"?s[n.axis]:n.size;f[n.axis]=Math.min(a[n.axis],Math.max(0,n.sizethumb==="auto"?a[n.axis]*o.ratio:n.sizethumb));u.ratio=n.sizethumb==="auto"?o[n.axis]/a[n.axis]:(o[n.axis]-s[n.axis])/(a[n.axis]-f[n.axis]);v=e==="relative"&&o.ratio<=1?Math.min(o[n.axis]-s[n.axis],Math.max(0,v)):0;v=e==="bottom"&&o.ratio<=1?o[n.axis]-s[n.axis]:isNaN(parseInt(e,10))?v:parseInt(e,10);E()};return w()}e.tiny=e.tiny||{};e.tiny.scrollbar={options:{axis:"y",wheel:40,scroll:true,lockscroll:true,size:"auto",sizethumb:"auto",invertscroll:false,arrowsInside:false}};e.fn.tinyscrollbar=function(n){var r=e.extend({},e.tiny.scrollbar.options,n);this.each(function(){e(this).data("tsb",new t(e(this),r))});return this};e.fn.tinyscrollbar_update=function(t){return e(this).data("tsb").update(t)}})(jQuery);$(function(){new ModerationClass()});ModerationClass=BaseClass.extend({init:function(){var thiz=this;this._super();this.initModeration();this.ajaxContainer=$('#listContainer');thiz.ajaxContainer.ajaxComplete(function(){thiz.initModeration()})},initModeration:function(){var thiz=this,editbarDiv=$('.editbar');if(editbarDiv.data('inited'))return;editbarDiv.data('inited',true);var canEdit=$('#frontendEditBox').length;if($('.editbar #selectAllBtn').length>0)$('.rightBranding').hide();var $sliders=$('.editbar .slider');$sliders.click(function(){$('.editbar .box').slideUp();$sliders.find(".icon").removeClass('aeup').addClass('aedown');var buttonID=$(this).attr("id"),actionName=buttonID.substring(7,200).toLowerCase();if($('.editbar .box.'+actionName).is(":hidden")){$(this).find(".icon").removeClass('aedown').addClass('aeup');$('.editbar .box.'+actionName).slideDown()};return false});$('.editbar:first .cancel-edit').click(function(e){e.preventDefault();$sliders.find(".icon").removeClass('aeup').addClass('aedown');$('.editbar .box').slideUp()});if(typeof $.fn.renderForms=='function'){$('.checkbox-container').renderForms({dropdowns:false});$('#selectAllBtn').parent().renderForms({dropdowns:false})};$('.banselect').click(function(){$this=$(this);$('.banselect').removeClass('banselected');$this.addClass('banselected');return false});$('#removeAdButton').click(function(){$selected=$('.banselected');if($selected.size()==0){alert('Select ban reason');return false};var reasonId=$selected.data("banId"),offerId=$selected.data("offerId"),isPaid=false;if($(this).hasClass('is_paid'))isPaid=true;$('#ajax-remove-message').text('wait...').show();$.post(location.protocol+'//'+window.location.host+'/adminpanel/ajax/frontendmoderation/remove/',{ids:offerId,reason:reasonId,paid_ads_remove:isPaid?1:0},function(data){$('#ajax-remove-message').text('Removed').show();setTimeout(function(){$('#ajax-remove-message').fadeOut(1e3);$('#ajax-remove-message').hide()},3e3)});return false});$('#removeAdsButton').click(function(){$selected=$('.banselected');if($selected.size()==0){alert('Select ban reason');return false};var reasonId=$selected.data("banId"),offerIds=[];$('.checkbox-container :checked').each(function(){offerIds.push($(this).val())});offerIds=offerIds.join(',');$('#ajax-remove-message').text('wait...').show();$.post(location.protocol+'//'+window.location.host+'/adminpanel/ajax/frontendmoderation/remove/',{ids:offerIds,reason:reasonId},function(data){$('#ajax-remove-message').text('Removed').show();setTimeout(function(){$('#ajax-remove-message').fadeOut(1e3);$('#ajax-remove-message').hide()},3e3)});return false});var changeFn=function(){$('#saveEdit').attr('disabled',false).parent().removeClass('disabled')};$('#privateBusiness, .category-select, #offerSeek').change(changeFn);$('#title, #description').bind('keypress change keyup',changeFn);$('#saveEdit').click(function(){var offerId=$(this).data("offerId"),title=$('#title').val(),txt=$('#description').val(),idCat=$('#category_field').val(),privateBusiness=$('#privateBusiness').val(),offerSeek=$('#offerSeek').val();$('#ajax-message').text('wait...').show();var postData={id:offerId,title:title,text:txt,id_category:idCat,private_business:privateBusiness,offer_seek:offerSeek},paramName=$('#fakecategory_name_field').val();if(paramName){postData.fakeCategoryParamName=paramName;postData.fakeCategoryParamValue=$('#fakecategory_value_field').val()};$.post(location.protocol+'//'+window.location.host+'/adminpanel/ajax/frontendmoderation/edit/',postData,function(data){if(typeof data.status=='string'){$('#ajax-message').text('Saved').show();setTimeout(function(){$('#ajax-message').fadeOut(1e3);$('#ajax-message').hide()},3e3)}});return false});$('#multiEdit').click(function(){var offerIds=[];$('.checkbox-container :checked').each(function(){offerIds.push($(this).val())});var idCat=$('#category_field').val(),privateBusiness=$('#privateBusiness').val(),offerSeek=$('#offerSeek').val();$('#ajax-message').text('wait...').show();var postData={ids:offerIds,id_category:idCat,private_business:privateBusiness,offer_seek:offerSeek},paramName=$('#fakecategory_name_field').val();if(paramName){postData.fakeCategoryParamName=paramName;postData.fakeCategoryParamValue=$('#fakecategory_value_field').val()};$.post(location.protocol+'//'+window.location.host+'/adminpanel/ajax/frontendmoderation/multiedit/',postData,function(data){if(typeof data.status=='string'){$('#ajax-message').text('Saved').show();setTimeout(function(){$('#ajax-message').fadeOut(1e3);$('#ajax-message').hide()},3e3)}});return false});$('.category-select').change(function(){$this=$(this);var idCat=$this.find('option:selected').val();thiz.showCategory(idCat);$('option[parent='+idCat+']').parent().show();newSelected=$('option[parent='+idCat+']').parent().find(':first').val();if($('#edit-cat-'+newSelected).attr('is_last')=='1')$('#category_field').val(newSelected)});var $allParamSelect=$('.param-select').change(function(){$this=$(this);var paramName=$this.data('name'),paramValue=$this.val();$('#fakecategory_name_field').val(paramName);$('#fakecategory_value_field').val(paramValue)});if(canEdit&&window.hotkeys)$(document).keydown(function(e){if(e.altKey){var keyCode=String.fromCharCode((96<=e.keyCode&&e.keyCode<=105)?e.keyCode-48:e.keyCode).toLowerCase();for(var i=0;i<hotkeys.length;i++)if(keyCode===hotkeys[i].key){thiz.showCategory(hotkeys[i].category_id);var adID=$('#saveEdit').data("offerId");$.get(location.protocol+'//'+window.location.host+'/adminpanel/ajax/frontendmoderation/changecategory/',{adID:adID,categoryID:hotkeys[i].category_id},function(){alert('Category was changed.')});break};return false}});if(canEdit){if(typeof __moderation_category_id!='undefined')thiz.showCategory(__moderation_category_id);if(typeof __moderation_fakecategory_value!="undefined")$('#fake_category_'+__moderation_category_id).val(__moderation_fakecategory_value).change();var firstCategory=$('.category-select [is_last=1]').val();$('#checkbox-change-category').bind('click',function(){var $this=$(this);if($this.filter(':checked').length){thiz.showCategory(firstCategory)}else{$('.category-select').hide();$('#category_field').val('')}})};$allParamSelect.change(changeFn);$('.removeImage').click(function(){var $this=$(this),adID=$('#saveEdit').data("offerId");$this.closest('li').remove();$('.removeImage').hide();$.post(location.protocol+'//'+window.location.host+'/adminpanel/ajax/frontendmoderation/removeimage/',{adID:adID,number:$this.attr('rel')},function(){$('.removeImage').show()});return false});$('#cancelDelete').click(function(){$('#editbarDeletearchived').click()});$('#editbarDeletearchived').click(function(){$('#saveDelete').click()});$('#saveDelete').click(function(){var offerId=$(this).data("offerId");$('#ajax-delete-message').text('wait...').show();$.post(location.protocol+'//'+window.location.host+'/adminpanel/ajax/moderation/deletearchived/',{id:offerId},function(data){if(typeof data.status=='string'){$('#ajax-delete-message').text('Deleted').show();setTimeout(function(){$('#ajax-delete-message').fadeOut(1e3);$('#ajax-delete-message').hide()},3e3)}});return false});$('#addComment').click(function(){var $txt=$('#rmoderation_comment');text=$txt.val(),userID=$txt.data("userId");$.post(location.protocol+'//'+window.location.host+'/adminpanel/ajax/moderation/usercomment/',{userID:userID,text:text},function(data){$txt.val('');var $tpl=$('#userCommentTemplate').clone().removeAttr('id');data.content=text;for(var v in data)$tpl.find('#'+v).text(data[v]).removeAttr('id');$tpl.hide().appendTo($('.commentslist')).fadeIn('slow');$('.commentslist').scrollTop(999999)},'json');return false});$('#selectAllBtn').click(function(){var $checkbox=$(this).parent().find(':checkbox');if($checkbox.is(':checked')){$('.checkbox-container input').attr('checked',true).change()}else $('.checkbox-container input').attr('checked',false).change()});var $adsCheckboxes=$('.checkbox-container input');$adsCheckboxes.click(function(){var $btn=$('#selectAllBtn');if($btn.is(':checked')&&$adsCheckboxes.length>$adsCheckboxes.filter(':checked').length)$('#selectAllBtn').attr('checked',false).change();if($btn.is(':not(:checked)')&&$adsCheckboxes.length==$adsCheckboxes.filter(':checked').length)$('#selectAllBtn').attr('checked',true).change()})},showCategory:function(categoryId){var thiz=this;$('.category-select').hide();$('.category-select').find('option').removeAttr('selected');var __categoryId=categoryId;do{obj=$('#edit-cat-'+categoryId);obj.parent().show();obj.attr('selected','selected');categoryId=obj.attr('parent')}while(categoryId);$('#category_field').val('');if($('#edit-cat-'+__categoryId).attr('is_last')=='1'){$('#category_field').val(__categoryId);thiz.showFakeCategory(__categoryId)}else thiz.showCategory($('.category-select option[parent='+__categoryId+']').attr('value'))},showFakeCategory:function(categoryId){$('.param-select').hide();$('#fakecategory_name_field').val('');$('#fakecategory_value_field').val('');var $el=$('#fake_category_'+categoryId).show();if($el.length){$el.val($el.children(':first').attr('value'));$el.change()}}});AdsenseClassBase=Class.extend({adsBlocks:[],init:function(options){var thiz=this;thiz.w=document.write;thiz.options=$.extend({},options)},setQuery:function(query){this.query=query},setRegionName:function(regionName){this.regionName=regionName},setSubregionName:function(subRegionName){this.subRegionName=subRegionName},setCategory:function(id,name,code,adsenseText){this.category={id:id,name:name,code:code,adsenseText:adsenseText}},setRootCategory:function(id,name,code){this.rootCategory={id:id,name:name,code:code}},setSeoPageName:function(seoPageName){this.seoPageName=seoPageName},getChannel:function(channelCode){var thiz=this,channelsCodes=thiz.getChannelsCodes();if(window.isUserSearch)return channelsCodes.user_search;var mapping=thiz.getCategoryChannelsMapping(),channels=thiz.rootCategory&&thiz.rootCategory.id?mapping[thiz.rootCategory.id]:false;if(!channels)return channelsCodes[channelCode];if(thiz.query){return channelsCodes[channelCode]+(channels.asf?','+channels.asf:'')}else if(thiz.forAd){return channelsCodes[channelCode]+(channels.category?','+channels.category:'')+(channels.ad&&channels.ad!=channels.category?','+channels.ad:'')}else return channelsCodes[channelCode]+(channels.category?','+channels.category:'')+(channels.listing&&channels.listing!=channels.category?','+channels.listing:'')},addAdsenseForSearchBlock:function(container,numberOfAds,options){if(!$('#'+container).length)return;var thiz=this;options=$.extend({container:container,number:numberOfAds,lines:numberOfAds,fontFamily:'verdana',fontSizeTitle:'14px',fontSizeDescription:'11px',fontSizeDomainLink:'11px',colorTitleLink:'#2965be',colorText:'#414141',colorDomainLink:'#414141',attributionText:' '},options);thiz.adsBlocks.push(options)},showAdsenseForSearchAds:function(channelCode){var thiz=this,pageOptions={pubId:thiz.getPubId(),query:thiz.query+(thiz.regionName?(' '+thiz.regionName):''),queryContext:thiz.getDefaultQueryContext()+(thiz.subRegionName?(' '+thiz.subRegionName):''),channel:thiz.getChannel(channelCode),hl:thiz.getLanguageId(),linkTarget:'_blank',titleBold:false,LinkUnderline:false,rolloverLinkUnderline:true,rolloverLinkBackgroundColor:'#3074B9',rolloverLinkColor:'#FFFFFF',siteLinks:false,verticalSpacing:12};switch(thiz.adsBlocks.length){case 1:_googCsa('ads',pageOptions,thiz.adsBlocks[0]);break;case 2:_googCsa('ads',pageOptions,thiz.adsBlocks[0],thiz.adsBlocks[1]);break;case 3:_googCsa('ads',pageOptions,thiz.adsBlocks[0],thiz.adsBlocks[1],thiz.adsBlocks[2]);break};thiz.adsBlocks=[]},addAdsenseForContentBlock:function(container,numberOfAds,channelCode,options){if(!$('#'+container).length)return;var thiz=this;options=$.extend({container:container,google_max_num_ads:numberOfAds,google_adnum:0,google_skip:0,google_ad_client:thiz.getPubId(),google_ad_channel:thiz.getChannel(channelCode),google_ad_output:'js',google_ad_type:'text',google_feedback:'on',google_language:thiz.getLanguageId()},options);if(thiz.category&&thiz.category.adsenseText){options.google_kw_type='broad';options.google_kw=thiz.category.adsenseText}else options.google_hints=(thiz.category&&thiz.category.id&&thiz.seoPageName?thiz.seoPageName:thiz.getDefaultHint())+(thiz.subRegionName?(' '+thiz.subRegionName):'');thiz.adsBlocks.push(options)},showAdsenseForContentAds:function(){var thiz=this;if(typeof GoogleObj=='undefined'||!thiz.adsBlocks.length)return;thiz.googleAdsDetails=[];for(x in thiz.adsBlocks){var container=thiz.adsBlocks[x]['container'],data=thiz.adsBlocks[x];delete data.container;thiz.googleAdsDetails.push({data:data,callbackFunction:thiz.getGoogleAdsCallbackFunc(container)})};thiz.adsIndexToLoad=0;thiz.loadGoogleAds(thiz.googleAdsDetails[0])},loadGoogleAds:function(data){var variables=data.data;for(name in window)if(name.indexOf('google_')>=0)delete window[name];variables.google_adnum=0;variables.google_skip=0;window.google_ad_request_done=data.callbackFunction;for(v in variables)window[v]=variables[v];var eleScript=document.createElement('script');document.write=(function(params){$(document.body).append(params)});eleScript.setAttribute('type','text/javascript');eleScript.setAttribute('src','http://pagead2.googlesyndication.com/pagead/show_ads.js?'+(new Date().getTime()));$(document.body).append(eleScript)},loadGoogleNextAd:function(){var thiz=this;thiz.adsIndexToLoad++;if(typeof thiz.googleAdsDetails[thiz.adsIndexToLoad]!='undefined'){thiz.loadGoogleAds(thiz.googleAdsDetails[thiz.adsIndexToLoad])}else{document.write=thiz.w;thiz.adsBlocks=[]}},getGoogleAdsCallbackFunc:function(container){var $container=$('#'+container);if(!$container.length)return;var thiz=this;return function(google_ads){if(google_ads.length==0)return;var s='',i;if(google_ads[0].type=='flash'){s+='<a href=\"'+google_info.feedback_url+'\" style="color:000000">Sponsored links</a><br><object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0" WIDTH="'+google_ad.image_width+'" HEIGHT="'+google_ad.image_height+'"> <PARAM NAME="movie" VALUE="'+google_ad.image_url+'"><PARAM NAME="quality" VALUE="high"><PARAM NAME="AllowScriptAccess" VALUE="never"><EMBED src="'+google_ad.image_url+'" WIDTH="'+google_ad.image_width+'" HEIGHT="'+google_ad.image_height+'" TYPE="application/x-shockwave-flash" AllowScriptAccess="never"  PLUGINSPAGE="http://www.macromedia.com/go/getflashplayer"></EMBED></OBJECT>'}else if(google_ads[0].type=='image'){s+='<a href=\"'+google_info.feedback_url+'\" style="color:000000"></a><br> <a href="'+google_ads[0].url+'" target="_top" title="Go to '+google_ads[0].visible_url+'" onmouseout="window.status=\'\'" onmouseover="window.status=\'Przejdź do '+google_ads[0].visible_url+'\';return true"><img border="0" src="'+google_ads[0].image_url+'"width="'+google_ads[0].image_width+'"height="'+google_ads[0].image_height+'"></a>'}else if(google_ads[0].type=="html"){s+=google_ads[0].snippet}else if(google_ads.length>=1){for(i=0;i<google_ads.length;++i)s+='<div class="offer"><table cellspacing="0" cellpadding="0" width="100%" summary="Ogłoszenie" class="fixed breakword"><tbody><tr><td width="85" class="tcenter"><a class="color-11" href="'+google_info.feedback_url+'" target="_blank">Advertising</a></td><td width="120"><a href="'+google_ads[i].url+'" target="_blank" class="br-1 block" style="width:96px; height:78px"></a></td><td><h4 class="large lheight20"><a target="_blank" class="link adsense" href="'+google_ads[i].url+'" onmouseout="window.status=\'\'" onmouseover="window.status=\''+google_ads[i].visible_url+'\';return true"> <span> '+google_ads[i].line1+'</span></a> </h4><p class="small"><span>'+google_ads[i].line2+' '+google_ads[i].line3+'</span></p> <p class="small"><a target="_blank" class="c41 tunder" href="'+google_ads[i].url+'" onmouseout="window.status=\'\'" onmouseover="window.status=\''+google_ads[i].visible_url+'\';return true"><span>'+google_ads[i].visible_url+'</span></a></p></td><td width="1" class="wwnormal tright"></td><td width="1" class="tright small"></td></tr></tbody></table></div>';if(google_ads[0].bidtype=="CPC")google_adnum=google_adnum+google_ads.length};$container.html(s);thiz.loadGoogleNextAd();return}},setL2Category:function(id,name){this.l2category={id:id,name:name}},getPageNumber:function(){return(geoData&&geoData.params&&geoData.params.page)?geoData.params.page:"1"},addAdsenseForSearchBlockListing:function(ajax,containers,channelCode,options){if($.isEmptyObject(containers))return;var thiz=this,query='';if(thiz.category.name!=''){query=thiz.category.name+', '+thiz.query}else query=thiz.query;query=thiz.prepareQuery(query);var pageOptions={pubId:thiz.getPubId(),query:query,queryContext:thiz.getDefaultQueryContext(thiz.rootCategory.id),channel:thiz.getChannel(channelCode),hl:thiz.getLanguageId(),ie:'UTF\x2D8',oe:'UTF\x2D8',linkTarget:'_blank',lines:3,width:'874px',adPage:thiz.getPageNumber(),fontFamily:'arial,helvetica,sans-serif',fontSizeTitle:'20px',fontSizeDescription:'13px',fontSizeDomainLink:'13px',colorTitleLink:'#2965be',colorText:'#414141',colorDomainLink:'#414141',colorAdBorder:'#e9e9e9',noTitleUnderline:true,verticalSpacing:10,adsafe:'medium',lineHeightDescription:30,domainLinkAboveDescription:false,numRepeated:2,rolloverLinkColor:'#f70'},adblocks=[],containerIndex=0;for(var i in containers){var adblock1={container:i,adIconUrl:'http://afs.googleusercontent.com/olx/olx_in_en.png',adIconWidth:144,adIconHeight:108,adIconSpacingBefore:5,adIconSpacingAfter:10,longerHeadlines:true,lineHeightTitle:30,clickableBackgrounds:true,rolloverAdBackgroundColor:'#EEE',noAdLoadedCallback:function(i,adsLoaded){if(!adsLoaded)$("#"+i).css("display","none")}};if(!containerIndex){adblock1.maxTop=containers[i]}else adblock1.number=containers[i];adblocks.push(adblock1);containerIndex++};thiz.initAFS(pageOptions,adblocks)},prepareQuery:function(str){var arr=str.split(/[&,-]/),query='';$(arr).each(function(index,value){query+=$.trim(value);if(index!=arr.length-1)query+=", "});return query},initAFS:function(pageOptions,adblocks){var timerID=null;if(typeof google=="object"){new google.ads.search.Ads(pageOptions,adblocks)}else timerID=window.setInterval(function(){if(typeof google=="object"){new google.ads.search.Ads(pageOptions,adblocks);if(timerID!=null)window.clearInterval(timerID)}},150)},addAdsenseForContentBlockListing:function(ajax,containers,channelCode,options){if($.isEmptyObject(containers))return;var thiz=this,defaultCategories='Sports & Health, Jobs, Real Estate, Home-Furniture,Services, Kids-Baby Books, CDs & Hobbies, Clothing-Accessories, Pets',categoryQuery='',l2name='',l3name='';if(thiz.l2category.name!=''&&thiz.category.name!=''&&thiz.rootCategory.name!=''){l2name=(thiz.l2category.name).replace(/[^a-zA-Z]/g,"");l3name=(thiz.category.name).replace(/[^a-zA-Z]/g,"");categoryQuery=(l2name.toLowerCase()!==l3name.toLowerCase())?thiz.rootCategory.name+', '+thiz.l2category.name+', '+thiz.category.name:thiz.rootCategory.name+', '+thiz.category.name}else if(thiz.category.name!=''&&thiz.rootCategory.name!=''){categoryQuery=thiz.rootCategory.name+', '+thiz.category.name}else categoryQuery=defaultCategories;categoryQuery=thiz.prepareQuery(categoryQuery);var pageOptions={pubId:thiz.getPubId(),query:'Buy, Used, '+categoryQuery,queryContext:thiz.getDefaultQueryContext(thiz.rootCategory.id),channel:thiz.getChannel(channelCode),hl:thiz.getLanguageId(),ie:'UTF\x2D8',oe:'UTF\x2D8',linkTarget:'_blank',lines:3,width:'874px',adPage:thiz.getPageNumber(),fontFamily:'arial,helvetica,sans-serif',fontSizeTitle:'20px',fontSizeDescription:'13px',fontSizeDomainLink:'13px',colorTitleLink:'#2965be',colorText:'#414141',colorDomainLink:'#414141',colorAdBorder:'#e9e9e9',noTitleUnderline:true,verticalSpacing:10,adsafe:'medium',lineHeightDescription:30,domainLinkAboveDescription:false,numRepeated:2,rolloverLinkColor:'#f70'},adblocks=[],containerIndex=0;for(var i in containers){var adblock1={container:i,adIconUrl:'http://afs.googleusercontent.com/olx/olx_in_en.png',adIconWidth:144,adIconHeight:108,adIconSpacingBefore:5,adIconSpacingAfter:10,longerHeadlines:true,lineHeightTitle:30,clickableBackgrounds:true,rolloverAdBackgroundColor:'#EEE',noAdLoadedCallback:function(i,adsLoaded){if(!adsLoaded)$('#'+i).css("display","none")}};if(!containerIndex){adblock1.maxTop=containers[i]}else adblock1.number=containers[i];adblocks.push(adblock1);containerIndex++};thiz.initAFS(pageOptions,adblocks)}});AdsenseClass=AdsenseClassBase.extend({addAdsenseForSearchBlock:function(ajax,container1,container2,numberOfAds,channelCode,options){if(!$('#'+container1).length&&!$('#'+container2).length)return;var thiz=this,pageOptions={pubId:thiz.getPubId(),query:thiz.query+(thiz.regionName?(' '+thiz.regionName):''),queryContext:thiz.getDefaultQueryContext(thiz.rootCategory.id)+(thiz.subRegionName?(' '+thiz.subRegionName):''),channel:thiz.getChannel(channelCode),hl:thiz.getLanguageId(),ie:'UTF\x2D8',oe:'UTF\x2D8',linkTarget:'_blank',lines:3,width:'874px',adPage:'1',fontFamily:'arial',fontSizeTitle:'18px',fontSizeDescription:'13px',fontSizeDomainLink:'13px',colorTitleLink:'#2965be',colorText:'#414141',colorDomainLink:'#414141',colorAdBorder:'#e9e9e9',noTitleUnderline:true,verticalSpacing:12},timerID=null;timerID=window.setTimeout(function(){var eleScript=document.createElement('script');eleScript.setAttribute('type','text/javascript');eleScript.setAttribute('src','http://www.google.com/adsense/search/ads.js?'+(new Date().getTime()));$(document.body).append(eleScript);var adblock1={container:container1,maxTop:2,adIconUrl:'http://afs.googleusercontent.com/olx/olx_en.png',adIconWidth:120,adIconHeight:90,adIconSpacingBefore:5,adIconSpacingAfter:10,lineHeightTitle:30,clickableBackgrounds:true,rolloverAdBackgroundColor:'#EEE',noAdLoadedCallback:function(container1,adsLoaded){if(!adsLoaded)$('#'+container1).css("display","none")}},adblock2={container:container2,number:numberOfAds,adIconUrl:'http://afs.googleusercontent.com/olx/olx_en.png',adIconWidth:120,adIconHeight:90,adIconSpacingBefore:5,adIconSpacingAfter:10,lineHeightTitle:30,clickableBackgrounds:true,rolloverAdBackgroundColor:'#EEE',noAdLoadedCallback:function(container2,adsLoaded){if(!adsLoaded)$('#'+container2).css("display","none")}};new google.ads.search.Ads(pageOptions,adblock1,adblock2);if(timerID!=null)window.clearTimeout(timerID)},500)},getPubId:function(){var actionName=window.action,isSearchActive=window.isSearch;if(actionName=='ads'){if(isSearchActive==true){return'olx-in'}else return'olx-in-browse'}else if(actionName=='ad')return'ca-olx-in'},getLanguageId:function(){return'en'},getCategoryChannelsMapping:function(){return{1411:{category:'OLX_IN_Mobile',asf:'OLX_IN_Search_Mobile',ad:'OLX_IN_Item_Mobile',listing:'OLX_IN_Listing_Mobile'},99:{category:'OLX_IN_Elec',asf:'OLX_IN_Search_Elec',ad:'OLX_IN_Item_Elec',listing:'OLX_IN_Listing_Elec'},5:{category:'OLX_IN_Vehicles',asf:'OLX_IN_Search_Vehicles',ad:'OLX_IN_Item_Vehicles',listing:'OLX_IN_Listing_Vehicles'},628:{category:'OLX_IN_Home',asf:'OLX_IN_Search_Home',ad:'OLX_IN_Item_Home',listing:'OLX_IN_Listing_Home'},103:{category:'OLX_IN_Animals',asf:'OLX_IN_Search_Animals',ad:'OLX_IN_Item_Animals',listing:'OLX_IN_Listing_Animals'},767:{category:'OLX_IN_Books',asf:'OLX_IN_Search_Books',ad:'OLX_IN_Item_Books',listing:'OLX_IN_Listing_Books'},87:{category:'OLX_IN_Fashion',asf:'OLX_IN_Search_Fashion',ad:'OLX_IN_Item_Fashion',listing:'OLX_IN_Listing_Fashion'},88:{category:'OLX_IN_Kids',asf:'OLX_IN_Search_Kids',ad:'OLX_IN_Item_Kids',listing:'OLX_IN_Listing_Kids'},619:{category:'OLX_IN_Services',asf:'OLX_IN_Search_Services',ad:'OLX_IN_Item_Services',listing:'OLX_IN_Listing_Services'},4:{category:'OLX_IN_Jobs',asf:'OLX_IN_Search_Jobs',ad:'OLX_IN_Item_Jobs',listing:'OLX_IN_Listing_Jobs'},3:{category:'OLX_IN_RE',asf:'OLX_IN_Search_RE',ad:'OLX_IN_Item_RE',listing:'OLX_IN_Listing_RE'},1817:{category:'OLX_IN_OtherCategories',asf:'OLX_IN_Search_OtherCategories',ad:'OLX_IN_Item_OtherCategories',listing:'OLX_IN_Listing_OtherCategories'}}},getChannelsCodes:function(){return{asf:'OLX_IN, OLX_IN_Search, OLX_IN_Listing_Bottom, OLX_IN_Listing_Top, OLX_IN_Listing_Middle',asf_empty:'OLX_IN, OLX_IN_NoResult',listing:'OLX_IN, OLX_IN_Listing, OLX_IN_Listing_Bottom, OLX_IN_Listing_Top,OLX_IN_Listing_Middle',listing_bottom:'OLX_IN, OLX_IN_Listing_Bottom',ad_bottom:'OLX_IN, OLX_IN_Item_Bottom',ad_right:'OLX_IN, OLX_IN_Item_Right',ad_top:'OLX_IN, OLX_IN_Item_Top',ad_bottom_text:'OLX_IN, OLX_IN_Item_Bottom_Link',user_search:'OLX_IN, OLX_IN_Search',listing_top:'OLX_IN, OLX_IN_Listing_Top',listing_right:'OLX_IN, OLX_IN_Listing_Right',listing_middle:'OLX_IN, OLX_IN_Listing_Middle'}},getSuggestionByCatId:function(catId){switch(catId){case"1411":return"Buy, Sell, Mobile, Telephone, phone, Handset, headphones, bluetooth	";case"99":return"buy, sell, headphones, speakers, cd, dvd, plasma, lcd, led";case"5":return"Buy, Sell, Car, Bike, Scooter, Bicycle";case"628":return"Buy, sell, furniture, table, sofa, dressing, chair, fridge, washing machine, oven";case"103":return"buy, sell, dogs, cats, birds, pet food, dog food, cat food";case"767":return"buy, sell, books, novels, fiction, biographies, school books, college books";case"87":return"buy, sell, watch, jwellery, fashion accessories, footwear, bags, luggage	";case"88":return"Buy, Sell, Strollers, Baby nutrition, toys, kids games, story books";case"619":return"Hire Domestic help, computer repair, mobile repair, movers and packers";case"4":return"HR Jobs, Call center Jobs, Engineer Jobs, MBA Jobs";case"3":return"Buy, Sell, Apartment, Flat, House, BHK, Floor, Rent, Villa, Housing";default:return"Buy sell"}},getDefaultQueryContext:function(categoryId){return"Buy sell"},getDefaultHint:function(){return'Mobile Tablets Sports & Health Jobs Real Estate Home-Furniture Services Kids-Baby Books CDs & Hobbies Clothing-Accessories Pets'}});